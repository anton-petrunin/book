%%!TEX root = the-dim.tex
%arXiv
\chapter{Dimension of CBB spaces}

As the main dimension-like invariant, we will use the linear dimension $\LinDim$; 
see Definition~\ref{def:lin-dim}. In other words, by default {}\emph{dimension} means {}\emph{linear dimension}. 

\section{Struts and rank}\label{sec:struts+rank}

Our definitions of strut 
and distance chart 
differ from the one in \cite{burago-gromov-perelman};
it is closer to Perelman's definitions \cite{perelman:spaces2,perelman:morse}.

The term ``strut'' seems to have the closest meaning to the original Russian term used by Yuriy Burago, Grigory Perelman, and Michael Gromov \cite{burago-gromov-perelman}.
In the official translation,
it appears as ``burst'', 
and in the authors' translation it was ``strainer''.
Neither seems intuitive, 
so we decided to switch to ``strut''.

\begin{thm}{Definition of struts}\label{def:strut-I}
Let $\spc{L}$ be a complete length $\Alex{}$ space.
We say that a point array $(a^0,a^1,\dots,a^\kay)$ in $\spc{L}$
 is \index{strutting point array}\emph{$\kappa$-strutting} for a point $p\in\spc{L}$ if $\angk\kappa p {a^i}{a^j}>\tfrac\pi2$ for all $i\ne j$.
\end{thm} 

Recall that the packing number is defined in \ref{sec:notations}.
The following definition is motivated by the observation that $k\z=\pack_{\pi/2}(\SS^{k-1})-1$ for any integer $k>0$. 

\begin{thm}{Definition}\label{def:rank}
Let $\spc{L}$ be a complete length $\Alex{}$ space
and $p\in \spc{L}$.
Let us define rank of $\spc{L}$ at $p$ as 
\[\rank_p=\rank_p\spc{L}
\df
\pack_{\pi/2}\Sigma_p-1.\]

\end{thm}

Thus $\rank$ takes values in $\ZZ_{\ge0}\cup\{\infty\}$.

\begin{thm}{Proposition}\label{prop:stutt}
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space 
and $p\in \spc{L}$.
Then the following conditions are equivalent:

\begin{subthm}{lem:stut<=>rank:rank}$\rank_p\ge\kay$,
\end{subthm}

\begin{subthm}{lem:stut<=>rank:strut}
there is a point array $(a^0,a^1,\dots,a^\kay)$
that is $\kappa$-strutting at $p$. 
\end{subthm}
\end{thm}

\parit{Proof of \ref{prop:stutt}, \ref{SHORT.lem:stut<=>rank:strut}$\Rightarrow$\ref{SHORT.lem:stut<=>rank:rank}.}
For each $i$,
choose a point $\acute a^i\in\Str(p)$ sufficiently close to $a^i$ (so $[p\acute a^i]$ exists for each $i$).
One can choose $\acute a^i$ so that we still have
$\angk\kappa{p}{\acute a^i}{\acute a^j}>\tfrac\pi2$ for all $i\ne j$.

From hinge comparison (\ref{angle}),
\[\mangle(\dir{p}{\acute a^j},\dir{p}{\acute a^j})
\ge
\angk\kappa{p}{\acute a^i}{\acute a^j}
>
\tfrac\pi2\]
for all $i\ne j$.
In particular, $\pack_{\pi/2}\Sigma_p\ge \kay+1$.

\parit{\ref{SHORT.lem:stut<=>rank:rank}$\Rightarrow$\ref{SHORT.lem:stut<=>rank:strut}.} 
Assume $(\xi^0,\xi^1,\dots,\xi^\kay)$ is an array of directions in $\Sigma_p$, such that $\mangle(\xi^i,\xi^j)>\tfrac\pi2$ if $i\ne j$.

Without loss of generality, 
we may assume that each direction $\xi^i$ is geodesic;
that is, for each $i$ there is a geodesic $\gamma^i$ in $\spc{L}$ such that $\gamma^i(0)\z=p$ and $\xi^i=(\gamma^i)^+(0)$.
From the definition of angle, it follows that for sufficiently small $\eps>0$ the array of points $a^i=\gamma^i(\eps)$ satisfies \ref{SHORT.lem:stut<=>rank:strut}.
\qeds

\begin{thm}{Corollary}\label{cor:rank>=k-open}
Let $\spc{L}$ be a complete length $\Alex{}$ space and $\kay\in\ZZ_{\ge0}$.
Then the set of all points in $\spc{L}$ 
with rank $\ge \kay$ is open.
\end{thm}

\parit{Proof.} Given an array of points $\bm{a}=(a^0,\dots,a^\kay)$ in $\spc{L}$, consider 
the set $\Omega_{\bm{a}}$ of all points $p\in \spc{L}$ such that array $\bm{a}$
 is $\kappa$-strutting for a point $p$.
Clearly $\Omega_{\bm{a}}$ is open.

According to Proposition~\ref{prop:stutt}, the set of points in $\spc{L}$ 
with rank $\ge \kay$ can be presented as
\[\bigcup_{\bm{a}}\Omega_{\bm{a}},\]
where the union is taken over all $\kay$-arrays $\bm{a}$ of points in $\spc{L}$.
Hence the result.
\qeds

\section{Right-inverse theorem}\label{sec:right-inverse-1}

Suppose that $\bm{a}=(a^1,\dots,a^\kay)$ is a point array in a metric space $\spc{L}$.
Recall that the map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^n$ is defined by
\[\distfun{\bm{a}}{p}{}\df(\dist{a^1}{p}{},\dots,\dist{a^n}{p}{}).\] 

\begin{thm}{Right-inverse theorem}
\label{thm:right-inverse-function}{\sloppy 
Suppose $\spc{L}$ is a complete length $\Alex{\kappa}$ space,
$p,b\in\spc{L}$, 
and $\bm{a}=(a^1,\dots,a^\kay)$ is a point array in $\spc{L}$.

}

Assume that $(b,a^1,a^2,\dots,a^\kay)$ is $\kappa$-strutting for $p$.
Then the distance map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^\kay$ has a right inverse defined in a neighborhood of $\distfun{\bm{a}}{p}\in\RR^\kay$;
that is, there is a submap $\map\:\RR^\kay\subto\spc{L}$ such that $\Dom \map\z\ni \distfun{\bm{a}}{p}$ and 
$\distfun{\bm{a}}{[\map(\bm{x})]}=\bm{x}$ for any $\bm{x}\in\Dom \map$.
Moreover,

\begin{subthm}{thm:right-inverse-function:Hoelder}
The map $\map$ can be chosen to be $C^{\frac{1}{2}}$-continuous (that is, Hölder continuous with exponent $\tfrac{1}{2}$) and such that 
\[\map(\distfun{\bm{a}}{p})=p.\]
\end{subthm}

\begin{subthm}{thm:right-inverse-function:open-map}
The distance map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^\kay$ is locally co-Lipschitz (in particular, open) in a neighborhood of $p$.
\end{subthm}

\end{thm}

Part \ref{SHORT.thm:right-inverse-function:open-map} of the theorem 
is closely related to \cite[Theorem 5.4]{burago-gromov-perelman} by Yuriy Burago, Grigory Perelman, and Michael Gromov, 
but the proof presented here is different.
Yet another proof can be built on \cite[Proposition~4.3]{lytchak:open-map} by Alexander Lytchak.

%\parbf{Remark for AKP.} It seems that the set $\Im \map$ is $\kay$-rectifiable; that is, it lies in an image of a Lipschitz map from bounded domain of $\RR^\kay$ to $\spc{L}$. It seems I have a proof, but it is not yet clear we need it.??

\parit{Proof.} 
Fix $\eps,r,\lambda>0$ such that the following conditions hold: 
\begin{enumerate}[(i)]
\item Each distance function $\distfun{a^i}{}{}$ and $\distfun{b}{}{}$ is $\tfrac\lambda2$-concave in $\oBall(p,r)$.
\item For any $q\in \oBall(p,r)$, we have $\angk{\kappa}{q}{a^i}{a^j}>\tfrac\pi2+\eps$ for all $i\ne j$ and $\angk{\kappa}{q}{b}{a^i}\z>\tfrac\pi2+\eps$ for all $i$.
In addition, $\eps<\tfrac{1}{10}$.
\end{enumerate}

Given $\bm{x}=(x^1,x^2,\dots,x^\kay)\in \RR^\kay$, 
consider the function 
$f_{\bm{x}}\:\spc{L}\to \RR$ defined by
\[f_{\bm{x}}=\min_{i}\{h_{\bm{x}}^i\}+\eps\cdot\distfun{b}{}{},\]
where $h_{\bm{x}}^i(q)=\min\{0,\dist{a^i}{q}{}-x^i\}$.
Note that for any $\bm{x}\in\RR^\kay$, the function $f_{\bm{x}}$ is $(1+\eps)$-Lipschitz and $\lambda$-concave in $\oBall(p,r)$.
Denote by $\alpha_{\bm{x}}(t)$ the $f_{\bm{x}}$-gradient curve (see Chapter~\ref{chap:grad}) that starts at $p$.

\begin{clm}{}\label{clm:|a alpha_x|=x}
If for some $\bm{x}\in\RR^\kay$ and $t_0\le\tfrac{r}{2}$ we have
$|\distfun{\bm{a}}{p}-\bm{x}|
\le
\tfrac{\eps^2}{10}\cdot t_0$, then 
$
\distfun{\bm{a}}{[\alpha_{\bm{x}}(t_0)]}
= 
\bm{x}$.

\end{clm}

First note that \ref{clm:|a alpha_x|=x} follows if for any $q\in \oBall(p,r)$, we have
\begin{enumerate}[(i)]
\item\label{111} $(\dd_q\distfun{a^i}{}{})(\nabla_q f_{\bm{x}})<-\tfrac{1}{10}\cdot\eps^2$ if $\dist{a^i}{q}{}>x^i$ and
\item\label{222} $(\dd_q\distfun{a^i}{}{})(\nabla_q f_{\bm{x}})>\tfrac{1}{10}\cdot\eps^2$ if 
\[\dist{a^i}{q}{}-x^i=\min_j\{\dist{a^j}{q}{}\z-x^j\}<0.\]
\end{enumerate}
Indeed, since $t_0\le\tfrac{r}2$, then $\alpha_{\bm{x}}(t)\in\oBall(p,r)$ for all $t\in[0,t_0]$.
Consider the following real-to-real functions:
\[\begin{aligned}
\phi(t)
&\df
\max_{i}\{\dist{a^i}{\alpha_{\bm{x}}(t)}{}-x^i\},
\\
\psi(t)
&\df
\min_{i}\{\dist{a^i}{\alpha_{\bm{x}}(t)}{}-x^i\}.
\end{aligned}\eqlbl{eq:xy-def}\]
Then from (\ref{111}), 
we have $\phi^+<-\tfrac{1}{10}\cdot\eps^2$
if $\phi>0$ and $t\in[0,t_0]$.
Similarly, 
from (\ref{222}), 
we have $\psi^+>\tfrac{1}{10}\cdot\eps^2$
if $\psi<0$ and $t\in[0,t_0]$.
Since $|\distfun{\bm{a}}{p}-\bm{x}|
\le
\tfrac{\eps^2}{10}\cdot t_0$, it follows that $\phi(0)\le \tfrac{\eps^2}{10}\cdot t_0$ and $\psi(0)\ge -\tfrac{\eps^2}{10}\cdot t_0$.
Thus $\phi(t_0)\le 0$ and $\psi(t_0)\ge 0$.
On the other hand, from \ref{eq:xy-def} we have $\phi(t_0)\ge \psi(t_0)$.
That is, $\phi(t_0)=\psi(t_0)=0$; hence \ref{clm:|a alpha_x|=x} follows.

Thus, to prove \ref{clm:|a alpha_x|=x}, it remains to prove (\ref{111}) and (\ref{222}).
First let us prove it assuming that $\spc{L}$ is geodesic.

Note that 
\[(\dd_q\distfun{b}{}{})(\dir{q}{a^i})
\le\cos\angk{\kappa}{q}{b}{a^j}<-\tfrac\eps2
\eqlbl{inq-b}\]
for all $i$, and
\[(\dd_q\distfun{a^j}{}{})(\dir{q}{a^i})
\le
\cos\angk{\kappa}{q}{a^i}{a^j}
<
-\tfrac\eps2\eqlbl{inq-a^j}\]
for all $j\ne i$. 
Further, \ref{inq-a^j} implies
\[(\dd_q h_{\bm{x}}^j)(\dir{q}{a^i})\le 0.\eqlbl{inq-h}\]
for all $i\ne j$.
The assumption in (\ref{111}) implies
\[\dd_q f_{\bm{x}}
=
\min_{j\ne i} \{\dd_q h_{\bm{x}}^j\}+\eps\cdot(\dd_q\distfun{b}{}{}).\]
Thus
\begin{align*}
-(\dd_q\distfun{a^i}{}{})(\nabla_q f_{\bm{x}})
&\ge
\<\dir q{a^i},\nabla_q f_{\bm{x}}\>
\ge
\\
&\ge
(\dd_qf_{\bm{x}})(\dir q{a^i})
=
\\
&=
\min_{i\ne j}\{(\dd_qh_{\bm{x}}^i)(\dir q{a^i})\}+\eps\cdot(\dd_q\distfun{b}{}{})(\dir q{a^i}).
\end{align*}
Therefore (\ref{111}) follows from \ref{inq-b} and \ref{inq-h}.

The assumption in (\ref{222}) implies that $f_{\bm{x}}(q)
=
h_{\bm{x}}^i(q)+\eps\cdot\distfun{b}{}{}$ and 
\[\dd_q f_{\bm{x}}\le \dd_q \distfun{a^i}{}{}+\eps\cdot(\dd_p\distfun{b}{}{}).\] 
Therefore,
\begin{align*}
(\dd_q \distfun{a^i}{}{})(\nabla_q f_{\bm{x}})
&\ge 
\dd_qf_{\bm{x}}(\nabla_q f_{\bm{x}})
\ge 
\\
&\ge
\left[(\dd_qf_{\bm{x}})(\dir qb)\right]^2
\ge
\\
&\ge
\left[\min_i\{\cos\angk\kappa qb{a^i}\}-\eps^2\right]^2.
\end{align*}
Thus (\ref{222}) follows from \ref{inq-b}, since $\eps<\tfrac{1}{10}$. 

Therefore \ref{clm:|a alpha_x|=x} holds if $\spc{L}$ is geodesic.
If $\spc{L}$ is not geodesic,
perform the above estimate in $\spc{L}^\o$, the ultrapower of $\spc{L}$. 
(Recall that according to \ref{obs:ultralimit-is-geodesic}, $\spc{L}^\o$ is geodesic.)
This completes the proof of \ref{clm:|a alpha_x|=x}. 
\claimqeds

Set $t_0(\bm{x})=\tfrac{10}{\eps^2}\cdot|\distfun{\bm{a}}{p}-\bm{x}|$, 
giving equality in \ref{clm:|a alpha_x|=x}.
Define the submap $\map$ by
\[\map\:{\bm{x}}\mapsto \alpha_{\bm{x}}\circ t_0(\bm{x}),\quad 
\Dom\map=\oBall(\distfun{\bm{a}}{p},\tfrac{\eps^2\cdot r}{20} )\subset\RR^\kay.\]
It follows from \ref{clm:|a alpha_x|=x} that
$\distfun{\bm{a}}{[\map(\bm{x})]}=\bm{x}$ for any $\bm{x}\in\Dom\map$.

Clearly $t_0(p)=0$; thus $\map(\distfun{\bm{a}}{p})=p$.
Further, by construction of $f_{\bm{x}}$, 
\[|f_{\bm{x}}(q)-f_{\bm{y}}(q)|\le |\bm{x}-\bm{y}|,\]
for any $q\in \spc{L}$.
Therefore, according to Lemma~\ref{lem:fg-dist-est}, $\map$ is $C^{\frac{1}{2}}$-continuous.
Thus \ref{SHORT.thm:right-inverse-function:Hoelder}.

Further, note that 
\[\dist{p}{\map(\bm{x})}{}
\le (1+\eps)\cdot t_0(\bm{x})
\le\tfrac{11}{\eps^2}\cdot|\distfun{\bm{a}}{p}-\bm{x}| 
\eqlbl{co-lip}\]
holds.

The above construction may be repeated for any $p'\in \oBall(p,\tfrac{r}{4})$, $\eps'=\eps$, and $r'=\tfrac{r}{2}$.
The inequality \ref{co-lip} for the resulting map $\map'$ implies that for any $p',q \in \oBall(p,\tfrac{r}{4})$
there is $q'\in\spc{L}$ such that $\map'(q)=\map'(q')$ and 
\[\dist{p'}{q'}{}
\le 
\tfrac{11}{\eps^2}\cdot|\distfun{\bm{a}}{p'}-\bm{x}|.\]
That is, the distance map $\distfun{\bm{a}}{}{}$ is locally $\tfrac{11}{\eps^2}$-co-Lipschitz in $\oBall(p,\tfrac{r}{4})$.
\qeds

\section{Dimension theorem}\label{sec:dim>m}

The following theorem is the main result of this section.

\begin{thm}{Theorem}\label{thm:dim-infty}
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space, 
$q\in \spc{L}$, 
$R>0$ 
and $m\in \ZZ_{\ge0}$.
Then the following statements are equivalent:
\begin{subthmA}{LinDim} $\LinDim\spc{L}\ge m$.
\end{subthmA}

\begin{subthmA}{thm:dim-infty:rank}
There is a point $p\in\spc{L}$ that admits a $\kappa$-strutting array $(b,a^1,\dots,a^m)\in\spc{L}^{m+1}$.
\end{subthmA}

\begin{subthmA}{LinDim+} Let $\Euk^m$ be the set 
of all points $p\in \spc{L}$ such that there is a distance-preserving embedding $\EE^m\hookrightarrow \T_p$
that preserves the cone structure 
(see Section \ref{sec: tangent space}).
Then $\Euk^m$ contains a dense G-delta set in $\spc{L}$.
\end{subthmA}

\begin{subthmA}{TopDim}
There is a $C^{\frac{1}{2}}$-embedding
\[\cBall[1]_{\EE^m}\hookrightarrow \oBall(q,R);\]
that is, a bi-Hölder embedding with exponent $\tfrac{1}{2}$.
\end{subthmA}

\begin{subthmA}{pack} 
\[\pack_\eps \oBall(q,R)>\frac{\Const}{\eps^m}\]
for some fixed $\Const>0$ and any $\eps>0$.
\end{subthmA}

\medskip

In particular:
\begin{enumerate}[(i)]
\item If $\LinDim\spc{L}=\infty$, then all the statements \ref{SHORT.LinDim+}, \ref{SHORT.TopDim}, and \ref{SHORT.pack} are satisfied for all $m\in\ZZ_{\ge0}$. 
\item 
 If the statement \ref{SHORT.TopDim} or \ref{SHORT.pack} is satisfied for some choice of $q\in \spc{L}$ and $R>0$, then it also is satisfied for any other choice of $q$ and $R$.
\end{enumerate}
\end{thm}

For finite-dimensional spaces, Theorem~\ref{thm:dim-finite} gives a stronger version 
of the theorem above.

The above theorem with the exception of statement~\ref{SHORT.TopDim} was proved by Conrad Plaut \cite{plaut:dimension}.
At that time, it was not known whether
\[\LinDim\spc{L}=\infty\quad \Rightarrow\quad \TopDim\spc{L}=\infty\]
for any complete length $\Alex\kappa$ space $\spc{L}$.
The latter implication was proved by Grigory Perelman and the third author \cite{perelman-petrunin:qg};
it was done by combining an idea of Conrad Plaut with the technique of gradient flow.
Part \ref{SHORT.TopDim} is somewhat stronger.

To prove Theorem \ref{thm:dim-infty} we will need the following three propositions.

\begin{thm}{Proposition}\label{E=T}
Let $p$ be a point in a a complete length $\Alex{\kappa}$ space
$\spc{L}$.
Assume there is a distance-preserving embedding $\iota\:\EE^{m}\hookrightarrow \T_p\spc{L}$ 
that preserves the cone structure.
% ??V: what reference is meant to be here?
Then either
\begin{subthm}{}
 $\Im\iota=\T_p\spc{L}$, or
\end{subthm}

\begin{subthm}{} there is a point $p'$ arbitrarily close to $p$ such that there is a distance-preserving embedding $\iota'\:\EE^{m+1}\hookrightarrow \T_{p'}\spc{L}$ 
that preserves the cone structure.
\end{subthm}
\end{thm}

\parit{Proof.}
Assume $\iota(\EE^{m})$ is a proper subset of $\T_p\spc{L}$.
Equivalently, there is a direction $\xi \in \Sigma_p\setminus\iota(\mathbb{S}^{m-1})$,
where $\mathbb{S}^{m-1}\subset \EE^m$ is the unit sphere. 

Fix $\eps>0$ so that $\mangle(\xi,\sigma)>\eps$ for any $\sigma\in \iota(\mathbb{S}^{m-1})$. 
Choose a maximal $\eps$-packing in $\iota(\mathbb{S}^{m-1})$;
that is, an array $(\zeta^1,\zeta^2,\dots,\zeta^n)$ of directions in $\iota(\mathbb{S}^{m-1})$ such that $n=\pack_\eps \mathbb{S}^{m-1}$ and $\mangle(\zeta^i,\zeta^j)>\eps$ for any $i\ne j$.

Choose an array $(x,z^1,z^2,\dots,z^n)$ of points in $\spc{L}$ such that
$\dir p x\approx\xi$, $\dir p{z^i}\approx\zeta^i$; 
here we write ``$\approx$'' for ``sufficiently close''.
We can choose this array so that
$\angk{\kappa}p x{z^i}>\eps$ for all $i$ 
and $\angk{\kappa}p{z^i}{z^j}>\eps$ for all $i\ne j$.
Applying Corollary \ref{cor:euclid-subcone}, there is a point $p'$ arbitrarily close to $p$ 
such that all directions $\dir{p'}x$, $\dir{p'}{z^1}$, $\dir{p'}{z^2},\dots,\dir{p'}{z^n}$
belong to an isometric copy of $\mathbb{S}^{\kay-1}$ in $\Sigma_{p'}$.
In addition, we may assume that $\angk{\kappa}{p'}x{z^i}>\eps$ and $\angk{\kappa}{p'}{z^i}{z^j}>\eps$.
From the hinge comparison (\ref{angle}),
$\mangle(\dir{p'}x,\dir{p'}{z^i})>\eps$ 
and $\mangle(\dir{p'}{z^i},\dir{p'}{z^j})>\eps$;
that is, 
\[\pack_\eps \mathbb{S}^{\kay-1}\ge n+1>\pack_\eps \mathbb{S}^{m-1}.\] 
Hence $\kay>m$.
\qeds

\begin{thm}{Proposition}\label{pack-homogeneus}
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space. Then 
 for any two points $p,\bar p\in \spc{L}$ and any $R,\bar R>0$, there is a constant $\delta\z=\delta(\kappa,R,\bar R,\dist{p}{\bar p}{})>0$ such that
\[\pack_{\delta\cdot\eps}\oBall(\bar p,\bar R)\ge \pack_{\eps}\oBall(p,R).\]

\end{thm}

\parit{Proof.} According to \ref{cor:CAT>k-sence}, we can assume that $\kappa\le 0$.

Let $n=\pack_{\eps}\oBall(p,R)$ and ${\{x^1,\dots, x^n}\}$ be a maximal $\eps$-packing in $\oBall(p,R)$;
that is, $\dist{x^i}{x^j}{}>\eps$ for all $i\ne j$.
Without loss of generality, we may assume the $x^i$ are in $\Str(\bar p)$.
Thus, for each $i$ there is a unique geodesic $[\bar p x^i]$ (see \ref{thm:almost.geod}).
Choose a factor $1>s>0$ so that $\bar R>s\cdot(\dist{p}{\bar p}{}+R)$.
For each $i$, take $\bar x^i\in[\bar p x^i]$ so that 
$\dist{\bar p}{\bar x^i}{}=s\cdot(\dist{p}{x^i}{})$.
From \ref{cor:monoton:2-sides},
\[\angkk\kappa {\bar p}{\bar x^i}{\bar x^j}{}\ge\angk\kappa {\bar p}{x^i}{x^j}.\]

\begin{wrapfigure}{r}{50 mm}
\vskip-4mm
\centering
\includegraphics{mppics/pic-1405}
\vskip0mm
\end{wrapfigure}

The cosine law gives a constant $\delta\z=\delta(\kappa,R,\bar R,\dist{p}{\bar p}{})>0$ such that 
\[\dist{\bar x^i}{\bar x^j}{}>\delta\cdot(\dist{x^i}{x^j}{})>\delta\cdot\eps\] 
for all $i\ne j$.
Hence the statement follows.
\qeds

\begin{thm}{Proposition}\label{E-comeagre} 
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space, 
$r\z<\varpi\kappa$ 
and $p\in \spc{L}$.
Assume that 
\[\pack_{\eps} \oBall(p,r)
>\pack_{\eps}\cBall[r]_{\Lob{m}{\kappa}}
\eqlbl{eq:pack>pack}\]
for some $\eps>0$.
Then there is a G-delta set $A\subset \spc{L}$
that is dense in a neighborhood of $p$ and
such that $\dim\Lin_q>m$ for any $q\in A$.
\end{thm}

\parit{Proof.} 
Choose a maximal $\eps$-packing in $\oBall(p,r)$,
that is, an array $(x^1,x^2,\dots, x^n)$ of points in $\oBall(p,r)$ such that $n=\pack_\eps \oBall(p,r)$ and $\dist{x^i}{x^j}{}>\eps$ for any $i\ne j$.
Choose a neighborhood $\Omega\ni p$
such that $\dist{q}{x^i}{}<r$ for any $q\in \Omega$ and all $i$.
Let 
\[A= \Omega\cap\Str(x^1,x^2,\dots,x^n).\]
According to Theorem \ref{thm:almost.geod}, $A$ is a G-delta set that is dense in $\Omega$.

Assume $\kay=\dim\Lin_q\le m$ for some $q\in A$.
Consider an array $(v^1,v^2,\dots,v^n)$ of vectors in $\Lin_q$,
where $v^i=\ddir{q}{x^i}$.
Clearly 
\[|v^i|=\dist{q}{x^i}{}<r,\] 
and from the hinge comparison (\ref{angle})
we have 
\[\side\kappa \hinge \0{v^i}{v^j}\ge \dist{x^i}{x^j}{}>\eps.\]
Note that the ball $\oBall(\0,r)_{\Lin_q}$ equipped with the metric $\rho(v,w)\z=\side\kappa \hinge \0{v}{w}$ is isometric to 
$\cBall[r]_{\Lob{\kay}{\kappa}}$.
Thus
\[
\pack_\eps\cBall[r]_{\Lob{\kay}{\kappa}}
\ge
\pack_\eps \oBall(p,r),
\]
which contradicts $\kay\le m$ and \ref{eq:pack>pack}.
\qeds

The proof of Theorem \ref{thm:dim-infty} is essentially done in \ref{E=T}, \ref{pack-homogeneus}, \ref{E-comeagre}, \ref{thm:inverse-function},
\ref{thm:right-inverse-function}; 
now we assemble the proof from these parts.


\parit{Proof of \ref{thm:dim-infty}.} 
We will prove the implications 
\[\textrm{\ref{SHORT.LinDim+} 
$\Rightarrow$ 
\ref{SHORT.LinDim} 
$\Rightarrow$ 
\ref{SHORT.thm:dim-infty:rank}
$\Rightarrow$ 
\ref{SHORT.pack}
$\Rightarrow$ 
\ref{SHORT.LinDim+} 
$\Rightarrow$ 
\ref{SHORT.TopDim} 
$\Rightarrow$ 
\ref{SHORT.pack}.}\]
The implication \ref{SHORT.LinDim+}$\Rightarrow$\ref{SHORT.LinDim} is trivial.

\parit{\ref{SHORT.LinDim}$\Rightarrow$\ref{SHORT.thm:dim-infty:rank}.}
Choose a point $p\in\spc{L}$ such that $\dim\Lin_p\ge m$.
Clearly one can choose an array $(\xi^0,\xi^1,\dots,\xi^m)$ of directions in $\Lin_p$ such that $\mangle(\xi^i,\xi^j)\z>\tfrac\pi2$ for all $i\ne j$.
Choose an array $(x^0,x^1,\dots,x^m)$ of points in $\spc{L}$ such that each $\dir{p}{x^i}$ is sufficiently close to $\xi^i$;
in particular, we have $\mangle\hinge{p}{x^i}{x^j}>\tfrac\pi2$.
Choose points $a^i\in\mathopen{]}p x^i\mathclose{]}$ sufficiently close to $p$.
This can be done so that each $\angk\kappa p{a^i}{a^j}$ is arbitrarily close to $\mangle\hinge p{a^i}{a^j}$,
in particular $\angk\kappa p{a^i}{a^j}>\tfrac{\pi}{2}$.
Finally, set $b=a^0$.

\parit{\ref{SHORT.thm:dim-infty:rank}$\Rightarrow$\ref{SHORT.pack}.} 
Let $p\in \spc{L}$ be a point that admits a $\kappa$-strutting array $(b,a^1,\dots, a^m)$ 
of points in $\spc{L}$.
The right-inverse theorem (\ref{thm:right-inverse-function:open-map})
implies that the distance map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^m$,
\[\distfun{\bm{a}}{}{}\:x\mapsto(\dist{a^1}{x}{},\dist{a^2}{x}{},\dots,\dist{a^n}{x}{}),\]
is open in a neighborhood of $p$.
Since the distance map $\distfun{\bm{a}}{}{}$ is Lipschitz, 
for any $r>0$, there is $\Const>0$ such that
\[\pack_\eps \oBall(p,r)>\frac{\Const}{\eps^m}\]
for any $\eps>0$.
Applying \ref{pack-homogeneus}, we get a similar inequality for any other ball in $\spc{L}$;
that is, for any $q\in\spc{L}$ and $R>0$, there is $\Const'>0$ such that 
\[\pack_\eps \oBall(q,R)>\frac{\Const'}{\eps^m}.\]

\parit{\ref{SHORT.pack}$\Rightarrow$\ref{SHORT.LinDim+}.} 
Note that for any $q'\in\spc{L}$ and $R'>\dist{q}{q'}{}+R$ we have
\begin{align*}
\pack_\eps\oBall(q',R')
&\ge
\pack_\eps\oBall(q,R)
\ge
\\
&\ge
\frac{\Const}{\eps^m}
>
\\
&>
\pack_\eps\cBall[R']_{\Lob{m-1}{\kappa}}
\end{align*}
for all sufficiently small $\eps>0$.
Applying \ref{E-comeagre},
$\Euk^m$
contains a G-delta set that is dense in a neighborhood of any point $q'\in\spc{L}$.

\parit{\ref{SHORT.LinDim+}$\Rightarrow$\ref{SHORT.TopDim}.} 
Since $\Euk^m$ contains a dense G-delta set in $\spc{L}$, we can choose $p\in \oBall(q,R)$ with a distance-preserving cone embedding $\iota\:\EE^m\hookrightarrow \T_p$.

Repeating the construction in \ref{SHORT.LinDim}$\Rightarrow$\ref{SHORT.thm:dim-infty:rank}, 
we get a $\kappa$-strutting array $(p,a^1,\dots, a^m)$ for $p$.

Applying the right-inverse theorem (\ref{thm:right-inverse-function}),
we obtain a $C^{\frac{1}{2}}$-submap 
\[\map\:\RR^m\subto \oBall(q,R)\]
that is a right inverse for $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^m$ and such that $\map(\distfun{\bm{a}}{p})=p$.
In particular, $\map$ is a $C^{\frac{1}{2}}$-embedding of $\Dom\map$.

\parit{\ref{SHORT.TopDim}$\Rightarrow$\ref{SHORT.pack}.}
This proof is valid for general metric spaces;
it is based on general relations between topological dimension, Hausdorff measure and $\pack_\eps$. 

Let $W\subset\oBall(q,R)$ be the image of the embedding $\map$.
Since $\TopDim W\z=m$,
Szpilrajn's theorem (\ref{thm:szpilrajn}) implies that
\[\HausMes_m W>0.\]

Given $\eps>0$, consider a maximal $\eps$-packing of $W$, 
that is, an array $(x^1,x^2,\dots,x^n)$ of points in $W$ such that $n=\pack_\eps W$ and $\dist{x^i}{x^j}{}>\eps$ for all $i\ne j$.
Note that $W$ is covered by balls $\oBall(x^i,2\cdot\eps)$.

By the definition of Hausdorff measure,
\[\pack_\eps W
\ge
\frac{\Const}{\eps^m}\cdot\HausMes_m W\]
for a fixed constant $\Const>0$ and all small $\eps>0$.
Hence \ref{SHORT.pack} follows.
\qedsf

\section{Inverse function theorem}

\begin{thm}{Inverse function theorem}\label{thm:inverse-function}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex\kappa$ space 
and $p,b,a^1,a^2,\dots,a^m\in\spc{L}$.

Assume that the point array $\bm{a}=(b,a^1,\dots,a^m)$ is $\kappa$-strutting for~$p$.
Then
there are $R>0$ and $\eps>0$ such that:

\begin{subthm}{thm:inverse-function:strut}
For all $i\ne j$ and any $q\in\oBall(p,R)$ we have
\[\angk\kappa{q}{a^i}{a^j}>\tfrac{\pi}{2}+\eps
\quad\text{and}\quad
\angk\kappa{q}{b}{a^i}>\tfrac{\pi}{2}.\]

\end{subthm}

\begin{subthm}{thm:inverse-function:chart}
The restriction of the distance map 
\[\distfun{\bm{a}}{}{}\:x\mapsto(\dist{a^1}{x}{},\dots,\dist{a^m}{x}{})\] 
to the ball $\oBall(p,R)$
is an open $[\eps,\sqrt{m}]$-bi-Lipschitz embedding $\oBall(p,R)\hookrightarrow\RR^m$.
\end{subthm}

\begin{subthm}{thm:inverse-function:R}
The value $R$ depends only on $\kappa$, $\dist{p}{a^i}{}$, $\dist{a^i}{a^j}{}$, and $\dist{b}{a^i}{}$
for all $i$ and $j$.
\end{subthm}

\end{thm}

\begin{thm}{Definition}\label{def:dist-chart}
Suppose $\spc{L}$ is an $m$-dimensional complete length $\Alex\kappa$ space.
If a point array $(b,a^1,a^2,\dots,a^m)$ 
and the value $R$ satisfy the conditions in Theorem~\ref{thm:inverse-function}, 
then the restriction 
$\bm{x}=\distfun{\bm{a}}{}{}|_{\oBall(p,R)}$
is called a \index{distance chart}\emph{distance chart},
the restrictions $x^i=\distfun{a^i}{}{}|_{\oBall(p,R)}$ are called \index{distance chart!coordinates of a distance chart}\emph{coordinates}, 
and the restriction $y=\distfun{b}{}{}|_{\oBall(p,R)}$ is called \index{distance chart!strut of a distance chart} the \emph{strut} of the distance chart.
\end{thm}

\begin{thm}{Lemma}\label{lem:pack(S^m)+}
Let $p$ be a point in an $m$-dimensional complete length $\Alex\kappa$ space $\spc{L}$.
Assume for the directions $\xi,\zeta^1,\zeta^2,\dots,\zeta^\kay\in\Sigma_p$ the following conditions hold: 

\begin{subthm}{}
$\mangle(\xi,\zeta^i)>\tfrac\pi2-\eps$ for all $i$,
\end{subthm}

\begin{subthm}{}
$\mangle(\zeta^i,\zeta^j)>\tfrac\pi2+\eps$ for all $i\ne j$.
\end{subthm}
Then $\kay\le m$.
\end{thm}

\parit{Proof.}
Without loss of generality, we can assume that all $\xi,\zeta^1,\zeta^2,\dots,\zeta^\kay$ are geodesic directions;
let $\xi=\dir{p}{x}$ and $\zeta^i=\dir{p}{z^i}$ for all $i$.
Fix a small $r>0$, and
let $\bar x\in \mathopen{]}px]$ and $\bar z^i\in\mathopen{]}p z^i]$ be points 
such that
\[\dist{p}{\bar x}{}=\dist{p}{\bar z^1}{}=\dots=\dist{p}{\bar z^\kay}{}=r.\]
From the definition of angle,
if $r$ is sufficiently small we have
\begin{itemize}
\item $\angk\kappa{p}{\bar x}{\bar z^i}>\tfrac\pi2-\eps$ for all $i$,
and $\angk\kappa{p}{\bar z^i}{\bar z^j}>\tfrac\pi2+\eps$ for all $i\ne j$.
\end{itemize}
Choose a point $p'\in\Str(\bar x,\bar z^1,\bar z^2,\dots,\bar z^\kay)$ sufficiently close to $p$ that the above conditions still hold for $p'$; that is,
\begin{clm}{}
 $\angk\kappa{p'}{\bar x}{\bar z^i}>\tfrac\pi2-\eps$ for all $i$, and $\angk\kappa{p'}{\bar z^i}{\bar z^j}>\tfrac\pi2+\eps$ for all $i\ne j$.
\end{clm}
Set $\acute\xi=\dir{p'}{\bar x}$ and $\acute\zeta^i=\dir{p'}{\bar z^i}$ for each $i$.
By the hinge comparison (\ref{angle}), 
\begin{clm}{}
$\mangle(\acute\xi,\acute\zeta^i)>\tfrac\pi2-\eps$ for all $i$, and $\mangle(\acute\zeta^i,\acute\zeta^j)>\tfrac\pi2+\eps$ for all $i\ne j$.
\end{clm}

According to Corollary~\ref{cor:euclid-subcone}, all directions $\acute\xi,\acute\zeta^1,\acute\zeta^2,\dots,\acute\zeta^\kay$ lie in an isometric copy of the standard $n$-sphere in $\Sigma_{p'}$. Clearly $n\le m-1$.
Thus it remains to prove the following claim, which is a partial case of the lemma.

\begin{clm}{}
If $\xi,\zeta^1,\zeta^2,\dots,\zeta^\kay\in\mathbb{S}^{m-1}$,
$\dist{\xi}{\zeta^i}{}>\tfrac\pi2-\eps$ for all $i$, and
$\dist{\zeta^i}{\zeta^j}{}>\tfrac\pi2+\eps$ for all $i\ne j$,
then $\kay\le m$.
\end{clm}

For each $i$, 
let 
$\bar\zeta^i$
be the closest point to $\zeta^i$
in
$\Xi=\mathbb{S}^{m-1}\setminus \oBall(\xi,\tfrac\pi2)
\iso
\mathbb{S}^{m-1}_+$ 
(if $\zeta\in\Xi$, then $\bar\zeta^i=\zeta^i$).
By straightforward calculations, we have
\[\dist{\bar\zeta^i}{\bar\zeta^j}{}\ge \dist{\zeta^i}{\zeta^j}{}-\eps>\tfrac\pi2.\]
Thus it is sufficient to show the following claim:

\begin{clm}{}
$\pack_{\frac\pi2}\mathbb{S}^{m-1}_+= m.$
\end{clm}

Clearly, $\pack_{\frac\pi2}\mathbb{S}^{m-1}_+\ge m$.

The opposite inequality is proved by induction on $m$.
The base case $m=1$ is obvious. 
Assume $(\bar\zeta^1,\bar\zeta^2,\dots,\bar\zeta^{\kay})$ is an array of points in $\mathbb{S}^{m-1}_+$ with $\dist{\bar\zeta^i}{\bar\zeta^j}{}>\tfrac\pi2$.
Without loss of generality, we can also assume that $\bar\zeta^\kay\in\partial \mathbb{S}^{m-1}_+$.
For each $i<\kay$, 
let $\check\zeta^i
=\dir{\bar\zeta^\kay}{\bar\zeta^i}\in\Sigma_{\bar\zeta^\kay}\mathbb{S}^{m-1}_+\iso\mathbb{S}^{m-2}_+$.
By the hinge comparison (\ref{angle}), $\mangle(\check\zeta^i,\check\zeta^j)>\tfrac\pi2$ 
for all $i<j<\kay$.
Thus from the induction hypothesis we have $\kay-1\le {m-1}$.
\qeds

\parit{Proof of \ref{thm:inverse-function}; \ref{SHORT.thm:inverse-function:strut}.} 
Fix $\eps>0$ such that 
$\angk\kappa p{a^i}{a^j}\z>\tfrac\pi2+\eps$ and $\angk\kappa p{b}{a^i}\z>\tfrac\pi2+\eps$ for all $i\ne j$.
Choose $R>0$ sufficiently small that 
$\angk\kappa q{a^i}{a^j}>\tfrac\pi2+\eps$ and $\angk\kappa q{b}{a^i}>\tfrac\pi2+\eps$ for all $i\ne j$ and any $q\in\oBall(p,R)$.
Clearly, \ref{SHORT.thm:inverse-function:strut} holds for $\oBall(p,R)$.

\parit{\ref{SHORT.thm:inverse-function:chart}.}
Note that the distance map $\distfun{\bm{a}}{}{}$ is Lipschitz
and its restriction $\distfun{\bm{a}}{}{}|_{\oBall(p,R)}$ is open;
the latter follows from the right-inverse theorem (\ref{thm:right-inverse-function:open-map}).
Thus to prove \ref{SHORT.thm:inverse-function:chart}, it is sufficient to show that
\[
\max_{i}\left\{\,\bigl|\dist{a^i}{x}{}-\dist{a^i}{y}{}\bigr|\,\right\}
>
\tfrac\eps2\cdot\dist[{{}}]{x}{y}{}
\eqlbl{expend}
\]
for any $x,y\in {\oBall(p,R)}$.

According to Lemma~\ref{lem:pack(S^m)+}, 
\[
\mangle\hinge{x}y{b}
\le
\tfrac\pi2-\eps
\quad\text{or}\quad
\mangle\hinge{x}y{a^i}
\le
\tfrac\pi2-\eps
\quad \text{for some}\quad i.
\]
In the latter case,
since $\dist{x}{y}{}<2\cdot R$ and $R$ is small, 
the hinge comparison (\ref{angle}) implies 
\[
\dist{a^i}{x}{}-\dist{a^i}{y}{}>\tfrac\eps2\cdot\dist[{{}}]{x}{y}{}
\quad \text{for some}\quad i.
\eqlbl{eq:y-x}\]

If $\mangle\hinge{x}y{b}
\le
\tfrac\pi2-\eps$, then 
switching $x$ and $y$, we get
\[
\dist{a^j}{y}{}-\dist{a^j}{x}{}
>
\tfrac\eps2\cdot\dist[{{}}]{x}{y}{}
\quad \text{for some}\quad j.
\eqlbl{eq:x-y}\] 
Then \ref{eq:y-x} and \ref{eq:x-y} imply \ref{expend}.

Finally, part \ref{SHORT.thm:inverse-function:R}
follows since the angle $\angk\kappa q{a^i}{a^j}$ 
depends continuously on $\kappa$, $\dist{q}{a^i}{}$, $\dist{q}{a^j}{}$ and $\dist{a^i}{a^j}{}$.
\qeds

\section{Finite-dimensional spaces}\label{sec:dim=m}

The next theorem is a refinement of \ref{thm:dim-infty} for the finite-dimensional case;
it was essentially proved by Yuriy Burago, Grigory Perelman, and Michael Gromov \cite{burago-gromov-perelman}.

\begin{thm}{Theorem}\label{thm:dim-finite}
Suppose $\spc{L}$ is a complete length $\Alex{\kappa}$ space, 
$m$ is a nonnegative integer,
$0<R\le \varpi\kappa$, and
$q\in \spc{L}$.
Then the following statements are equivalent:
\begin{subthm}{LinDim-f} $\LinDim\spc{L}= m$.
\end{subthm}

\begin{subthm}{thm:dim-finite:rank}
$m$ is the maximal integer such that there is a point $p\in\spc{L}$ that admits a $\kappa$-strutting array $(b,a^1,\dots,a^m)$.
\end{subthm}

\begin{subthm}{LinDim+-f} $\T_p\iso \EE^m$ for any point $p$ in a dense G-delta set of $\spc{L}$.
\end{subthm}

\begin{subthm}{TopDim-f} There is an open bi-Lipschitz embedding 
\[\cBall[1]_{\EE^m}\hookrightarrow \oBall(q,R)\subset \spc{L}.\]
\end{subthm}

\begin{subthm}{pack-f} For any $\eps>0$,
\[\pack_\eps\cBall[R]_{\Lob{m}{\kappa}} \ge\pack_\eps \oBall(q,R).\]
moreover, there is $\Const=\Const(q,R)>0$ such that 
\[\pack_\eps \oBall(q,R)>\frac\Const{\eps^m}.\]
\end{subthm}

\end{thm}

Using theorems \ref{thm:dim-infty} and \ref{thm:dim-finite}, 
one can show that linear dimension is equal to many different types of dimension, such 
as {}\emph{small} and \index{inductive dimension}\emph{big inductive dimension} 
and {}\emph{upper} and \index{box counting dimensions}\emph{lower box-counting dimension}
(also known as \index{Minkowski dimension}\emph{Minkowski dimension}), 
\index{homological dimension}\emph{homological dimension} and so on.

The next two corollaries follow from \ref{SHORT.pack-f}.

\begin{thm}{Corollary}\label{cor:dim>proper}
Any $m$-dimensional complete length $\Alex{}$ space is proper and geodesic.
\end{thm}

\begin{thm}{Corollary} Let $(\spc{L}_n)$ be a sequence of length $\Alex\kappa$ spaces and $\spc{L}_n\to \spc{L}_\o$ as $n\to\o$.
Assume $\LinDim L_n\le m$ for all $n$.
Then $\LinDim L_\o\le m$.
\end{thm}

\begin{thm}{Corollary}\label{dim=dim} 
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space. 
Then for any open $\Omega\subset \spc{L}$, we have
\[
\LinDim \spc{L}=
\LinDim\Omega =
\TopDim\Omega=
\HausDim\Omega,
\]
where $\TopDim$ and $\HausDim$ denote topological dimension (\ref{def:TopDim}) and Hausdorff dimension (\ref{def:HausDim}) respectively.

In particular, $\spc{L}$ is dimension-homogeneous; that is, all open sets have the same linear dimension.
\end{thm}

\parit{Proof of \ref{dim=dim}.} 
The equality
\[\LinDim \spc{L}= \LinDim\Omega\]
follows from \ref{LinDim}$\&$\ref{SHORT.LinDim+}.

If $\LinDim \spc{L}=\infty$, then
applying \ref{TopDim} for $\oBall(q,R)\subset \Omega$, we find that there is a compact subset $K\subset \Omega$ having an arbitrarily large $\TopDim K$. Therefore
\[\TopDim\Omega=\infty.\] 
By Szpilrajn's theorem (\ref{thm:szpilrajn}),
$\HausDim K\ge \TopDim K$.
Thus we also have 
\[\HausDim\Omega=\infty.\]

If $\LinDim \spc{L}=m<\infty$, then the first inequality in \ref{pack-f} 
implies that \[\HausDim \oBall(q,R)\le m.\] 
According to Corollary~\ref{cor:dim>proper}, 
$\spc{L}$ is proper and in particular has countable base. 
Thus applying Szpilrajn's theorem again, we have
\[\TopDim\Omega\le \HausDim \Omega\le m.\]
Finally, \ref{TopDim-f} implies that $m\le\TopDim\Omega$.
\qeds

\parit{Proof of \ref{thm:dim-finite}.}
The equivalence \ref{SHORT.LinDim-f}$\Leftrightarrow$\ref{SHORT.thm:dim-finite:rank} follows from \ref{thm:dim-infty}.

\parit{\ref{SHORT.LinDim-f}$\Rightarrow$\ref{SHORT.LinDim+-f}.}
If $\LinDim\spc{L}=m$, then by Theorem~\ref{thm:dim-infty}, 
$\Euk^m$ contains a dense G-delta set in $\spc{L}$.
From \ref{E=T}, it follows that $\T_p$ is isometric to $\EE^m$ for any $p\in \Euk^m$.

\parit{\ref{SHORT.LinDim+-f}$\Rightarrow$\ref{SHORT.TopDim-f}.}
This is proved in exactly the same way as implication \ref{SHORT.LinDim+}$\Rightarrow$\ref{SHORT.TopDim} of theorem \ref{thm:dim-infty}, 
but applying the existence of a distance chart (\ref{thm:inverse-function}) 
instead of the right-inverse theorem (\ref{thm:right-inverse-function}).

\parit{\ref{SHORT.TopDim-f}$\Rightarrow$\ref{SHORT.pack-f}.} 
From \ref{SHORT.TopDim-f}, it follows that there is a point $p\in\oBall(q,R)$ and $r>0$ such that
$\oBall(p,r)\subset \spc{L}$ is bi-Lipschitz homeomorphic to a bounded open set of $\EE^m$.
Thus there is $\Const>0$ such that 
\[\pack_\eps \oBall(p,r)>\frac{\Const}{\eps^m}.\eqlbl{eq:thm:dim-finite*}\]
Applying \ref{pack-homogeneus} shows that inequality \ref{eq:thm:dim-finite*}, with different constants, holds for any other ball, in particular for $\oBall(q,R)$.

Applying \ref{E-comeagre} gives the first inequality in \ref{SHORT.pack-f}.

\parit{\ref{SHORT.pack-f}$\Rightarrow$\ref{SHORT.LinDim-f}.} 
From Theorem \ref{thm:dim-infty}, we have $\LinDim\spc{L}\ge m$. 
Applying Theorem \ref{thm:dim-infty} again, if $\LinDim\spc{L}\ge m+1$ then for some $\Const>0$ and any $\eps>0$,
\[\pack_\eps \oBall(q,R)\ge \frac{\Const}{\eps^{m+1}}.\]
But
\[\frac{\Const'}{\eps^m}\ge\pack_\eps \oBall(q,R)\] 
for any $\eps>0$,
a contradiction.
\qeds

\begin{thm}{Exercise}\label{ex:compact-dimension-cbb}
Suppose $\spc{L}$ is a complete length $\Alex{}$ space and $\Sigma_p\spc{L}$ is compact for any $p\in\spc{L}$.
Prove that $\spc{L}$ is finite-dimensional.
\end{thm}

\section{One-dimensional spaces}

\begin{thm}{Theorem}\label{thm:dim=1.CBB} 
Let $\spc{L}$ be a one-dimensional complete length $\Alex\kappa$ space.
Then $\spc{L}$ is isometric to a connected complete Riemannian one-dimensional manifold with possibly non-empty boundary.
\end{thm}

\parit{Proof.}
Clearly $\spc{L}$ is connected.
It remains to show the following:
\begin{clm}{}\label{clm:1-dim-all}
For any point $p\in\spc{L}$
there is $\eps>0$ such that $\oBall(p,\eps)$ 
is isometric to either $[0,\eps)$ or $(-\eps,\eps)$.
\end{clm}

First let us show:
\begin{clm}{}\label{clm:1-dim-mid}
If $p\in\mathopen{]}x y\mathclose{[}$ for some $x$, $y\in\spc{L}$ and $\eps<\min\{\dist{p}{x}{},\dist{p}{y}{}\},$
then $\oBall(p,\eps)\subset\mathopen{]}x y\mathclose{[}$.
In particular,
$\oBall(p,\eps)\iso(-\eps,\eps)$.
\end{clm}

\begin{wrapfigure}{r}{33 mm}
\vskip0mm
\centering
\includegraphics{mppics/pic-1410}
\vskip0mm
\end{wrapfigure}

Assume the contrary;
that is, there is 
$$z\in \oBall(p,\eps)\setminus\mathopen{]}x y\mathclose{[}.$$
Consider a geodesic $[p z]$, and let $q\in[p z]\cap[x y]$ be the point that maximizes the distance $\dist{p}{q}{}$.
At $q$, we have three distinct directions: 
to $x$, $y$, and $z$.
Moreover, $\mangle\hinge{q}{x}{y}=\pi$.
Thus, according to Proposition~\ref{E=T}, 
$\LinDim\spc{L}>1$, a contradiction.
\claimqeds

Now we assume no geodesic includes $p$ as a non endpoint.
Since $\LinDim\spc{L}\z=1$ there is a point $y\ne p$.

Fix a positive value $\eps<\dist{p}{y}{}$.
Let us show:

{

\begin{wrapfigure}{r}{33 mm}
\vskip0mm
\centering
\includegraphics{mppics/pic-1415}
\vskip0mm
\end{wrapfigure}

\begin{clm}{}\label{clm:1-dim-end}
$\oBall(p,\eps)\subset [p y]$;
in particular, $\oBall(p,\eps)\iso[0,\eps)$.
\end{clm}

Assume the contrary;
let $z\in \oBall(p,\eps)\setminus[p y]$.

Choose a point $w\in \mathopen{]} p y \mathclose{[}$ such that 
\[\dist{p}{w}{}+\dist{p}{z}{}<\eps.\]
Consider geodesic $[w z]$, and let $q\in[p y]\cap[w z]$ be the point that maximizes the distance $\dist{w}{q}{}$.
Since no geodesic includes $p$ as a non endpoint, we have $p\ne q$.
As above, $\mangle\hinge{q}{p}{y}=\pi$ 
and $\dir{q}{z}$ is distinct from $\dir{q}{p}$ and $\dir{q}{p}$.
Thus, according to Proposition~\ref{E=T}, 
$\LinDim\spc{L}>1$, a contradiction.
\claimqeds

}

Clearly $\text{\ref{clm:1-dim-mid}}+\text{\ref{clm:1-dim-end}}\Rightarrow\text{\ref{clm:1-dim-all}}$;
hence the result.
\qeds


