%%!TEX root = the-solutions.tex

\chapter{Solutions}

\input{defs-CBB+CBA-sol.tex}

\parbf{ Exercise ~\ref{exr-crofton}.}
%By rescaling we can assume that $\kappa=1$. 
Let $\alpha$ be a closed curve in  $\mathbb{S}^2$ of length $\le 2\pi$.  We wish to prove that it's contained in a hemisphere in $\mathbb{S}^2$.
By approximation it's sufficient to prove this for  smooth curves of length $< 2\pi$ with transverse self-intersections. Furthermore, by changing such  a curve near its self-intersection points  it can be approximated with respect to the Hausdorff distance by simple closed curves. 
Thus, without loss of generality we can assume that $\alpha$ is a simple closed curve of length $<2\pi$.
By Crofton's formula we have that
\[
L(\alpha)=\frac 1 4 \int _{\mathbb{S}^2}\#(\alpha\cap v^\perp) \dd_v\vol_2
\]

Obviously,  if $\#(\alpha\cap v^\perp) =0$, then $\alpha$ is contained in one of the hemispheres determined by $v^\perp$. By the intermediate value theorem the same holds true if $\#(\alpha\cap v^\perp) =1$.
Suppose  $\#(\alpha\cap v^\perp) \ge 2$ for all $v\in\mathbb{S}^2$. Then Crofton's formula implies that
$L(\alpha)\ge \frac 1 4 \int_{\mathbb{S}^2}2=2\pi$. \qeds

\parbf{ Exercise ~\ref{ex:no-geod}.}
%Given a  metric graph $\Gamma$ let $\Mid(\Gamma)$ be the set of vertices of $\Gamma$ together with the baricenters of all edges in $\Gamma$ with the induced metric from $\Gamma$.

Given a metric graph $\Gamma$ define $P_k(\Gamma)$ as follows. Let $\Gamma^b$ be the barycentric subdivision of $\Gamma$ with the natural metric. For any two adjacent vertices $p,q\in\Gamma^b$ substitute the edge $[pq]$ by  a countable collection of intervals $\{I_i\}_{i\ge 1}$ of length $\dist{p}{q}{}+\frac{\dist{p}{q}{}}{2^ki}$ where one end of each $I_i$ is glued to $p$ and the other to $q$. Note that the resulting space $P_k(\Gamma)$ is again a metric graph  with an inner metric. 

Let $\spc{X}_0=[0,1]$ and define $\spc{X}_k$ for $k\ge 1$ inductively as $\spc{X}_k=P_k(\spc{X}_{k-1})$.

Let $\spc{Y}_k$ be the set of vertices of $\spc{X}_k$ with the induced metric. By construction the inclusion $\spc{Y}_k\subset \spc{Y}_{k+1}$ is distance preserving.

Let $\spc{Y}_\infty=\cup_{k\ge 1}\spc{Y}_k$ with the obvious metric and let $\spc{Y}=\bar {\spc{Y}}_\infty$ be its metric completion. Then $\spc{Y}$ is a length space since it satisfies the almost midpoint property. But it is not hard to see that no two distinct points in $\spc{Y}$ can be connected by a shortest geodesic. \qeds

\parbf{ Exercise ~\ref{exercise from BH}.}
The following example is from~\cite{BH}.

Consider the following subset of $\R^2$:

\[
\spc{X}=(0,1]\times\{0\}\cup (0,1]\times\{1\}\cup_{n\ge 1}\{1/n\}\times[0,1]
\]
Consider the induced inner metric on $\spc{X}$. It's obviously locally compact and geodesic.
However, it's immediate to check that its metric completion $\bar{\spc{X}}=[0,1]\times\{0\}\cup [0,1]\times\{1\}\cup_{n\ge 1}\{1/n\}\times[0,1]$ is neither. \qeds

\parbf{Besicovitch inequality \ref{ex:besicovitch-inq}.}
Fix $\eps>0$ and let
$f_1,f_2\dots\:\EE^m\subto \spc{X}$
be the short submaps such that 
\[\Im\Phi\subset\bigcup_n\Im f_n\]
and 
\[\sum_n\vol_m(\Dom f_n)
<
\LongMes_m(\Im\Phi)+\eps.\]

Consider the functions $\psi^i=\distfun{A^i}{}{}$
and the map $\bm{\psi}=(\psi^1,\dots,\psi^n)\:\spc{X}\to\RR^n$.
Note that for each $i$ and $n$,
the composition $\psi^i\circ f_n$ is 1-Lipschitz.
It follows that
\begin{align*}
|[\dd_x(\bm\psi\circ f_n)]^{\wedge n}|
&\le \lip(\psi^1\circ f_n)\cdots\lip(\psi^m\circ f_n)
\le
\\
&
\le 1.
\end{align*}
for almost all $x\in\Dom f_n$.

Note that 
\[\Im\bm\psi\circ\map
\supset
[0,a^1]\times\dots\times[0,a^n].\]


Applying Federer's area formula,
for 
$\bm\psi\circ f_n\:\RR^m\subto\RR^m$, 
we get 
\begin{align*}\vol_n(\Dom f_n)
&=
\int\limits_{\Im \bm\psi\circ f_n}|[\dd_x(\bm\psi\circ f_n)]^{\wedge n}|\cdot\dd_x\vol_m\le
\\
&\le \vol_n(\Im \bm\psi\circ f_n)
\end{align*}

\begin{align*}
\LongMes_m \spc{X}+\eps
&\ge \sum_n\,\vol_n(\Dom f_n)\ge
\\
&\ge \sum_n\,\int\limits_{\Dom f_n}\bigl|[\dd_x(\bm\psi\circ f_n)]^{\wedge n}\bigr|\cdot\dd_x\vol_n=
\\
&=\sum_n\,\vol_n(\Im \bm\psi\circ f_n)\ge
\\
&\ge \vol_n[\bm\psi(\spc{X})].
\end{align*}
Since $\eps>0$ is arbitrary, 
the result follows.
\qeds

\parbf{Exercise \ref{ex:ultra-unique-geod}.}
It is sufficient to show that midpoint $z$ of $[pq]$ lies in $\spc{X}$.
Take a sequnce of points $z_n\in \spc{X}$ such that $z_n\to z$ as $n\to\o$.

Arguing by contradiction,
assume that $z_\o\notin\spc{X}$.
Then, according to Lemma~\ref{lem:X-X^w}, there is a subsequence $(z'_n)$ of $(z_n)$ such that $z'_n\to z'\not= z$ as $n\to\o$.
Clearly $z'$ is a midpoint for $p$ and $q$.

According to \ref{cor:ulara-geod} $\spc{X}^\o$ is geodesic.
Choose two geodesics $[p z']$ and $[z' q]$;
together they form a geodesic from $p$ to $q$ in $\spc{X}^\o$ that is distinct from $[p q]$, a contradiction.
\qeds



\parbf{Exercise \ref{ex:lip+dist}.}
Applying partition of unity, we may assume that support of $f$ lies in the domain $\Omega$ that admits a bi-Lipschitz distance embedding $\bm{a}\:\spc{L}\to\RR^\kay$.
Choose sufficiently big constant; $\Const\ge ???$ will do.
Define 
$$\phi(\bm{x})
=
\min\set{\Const\cdot|\distfun{\bm{a}}{p}-\bm{x}|+f(p)}{p\in \Omega}.$$

\parbf{Exercise \ref{ex:d(grad)<0}.}
Let $\phi\can F\circ\distfun{\bm{a}}{}{}$ 
and $\psi\can G\circ\distfun{\bm{b}}{}{}$; 
clearly,
\begin{align*}
\dd_p\phi(v)
&=\sum_i\partial_i F\cdot (\dd_p\distfun{a^i}{}{})(v),
\\
\dd_p\psi(v)
&=\sum_i\partial_j G\cdot (\dd_p\distfun{b^j}{}{})(v).
\end{align*}
Applying the definition of gradient (\ref{def:grad}),
Theorem \ref{thm:differential-of-dist}
and the identities above, 
we get that 
for any choice of geodesics $[pa^i]$ the following holds
\begin{align*}
\dd_p\phi(\nabla_p\psi)
&=\sum_i\partial_i F
\cdot
(\dd_p\distfun{a^i}{}{})(\nabla_p\psi)
\le
\\
&\le
-\sum_i\partial_i F
\cdot
\<\dir{p}{a^i},\nabla_p\psi\>
\le
\\
&\le
-\sum_i
\partial_i F
\cdot
\dd_p\psi(\dir{p}{a^i})
=
\\
&=
-\sum_{i,j}
\partial_i F
\cdot
\partial_j G
\cdot
(\dd_p\distfun{b^j}{}{})(\dir{p}{a^i})
\le
\\
&\le
\sum_{i,j}
\partial_i F
\cdot
\partial_j G
\cdot
\cos\angk\kappa{p}{a^i}{b^j}=
\\
&=\sdk\kappa{p}{\phi}{\psi}
\end{align*}
\qedsf

\parbf{Exercise \ref{ex:df(v)=<grad f,v>}.}
Recall that given two vectors $v,w\in \T_p$ we write 
$v+w=0$ if $|v|=|w|$ and $\mangle(v,w)=\pi$.


According to ???,
for almost all $t\in\II$,
the right and left derivatives 
$\alpha^+(t),\alpha^-(t)\in \T_{\alpha(t)}$
are defined and $\alpha^+(t)+\alpha^-(t)=0$.
In particular, 
\[\<\nabla_pf,\alpha^+(t)\>+\<\nabla_pf,\alpha^-(t)\>
\ae 0\]
By ???, $f\circ\alpha$ is differentiable for almost all $t\in\II$.
Therefore 
\[\dd_pf(\alpha^+(t))+\dd_pf(\alpha^-(t))\ae
0.\]
Since 
\[\<\nabla_pf,\alpha^\pm(t)\>\ge \dd_pf(\alpha^\pm(t)),\]
we get the result.


\parbf{Exercise \ref{ex:nan-li}.}
Consider space $\hat{\spc{L}}=\spc{L}\times\{-1,+1\}$ with involution
$\psi\:(x,s)\mapsto (x,-s)$.
Let $\sim$ be the minimal equivalence relation on $\hat{\spc{L}}$
such that $(x,s)\approx (\iota(x),-s)$ for any $x\in\partial\spc{L}$. 

According to the Gluing theorem (\ref{thm:gluing-cbb}),
$\hat{\spc{L}}/\sim$ is an $m$-dimensional complete length $\Alex\kappa$ space.
Note that $\psi$ induce an isometry on $\hat{\spc{L}}/\sim$.

Finally notice that $\spc{L}/\iota=(\hat{\spc{L}}/\sim)/\psi$ 
and apply Theorem \ref{thm:CBB/G}.







\parbf{Exercise~\ref{ex:funny-S}.} In the proof we apply the following lemma from \cite{edwards}; 
it follows from the disjoint discs property.


\begin{thm}{Lemma}\label{lem:homomanifold-characterization}
Let $\spc{S}$ be a simplicial complex that 
is an $m$-dimensional homology manifold for some $m\ge 5$.
Assume all the vertices of
$\spc{S}$ have simply connected links.
Then $\spc{S}$ is a topological manifold.
\end{thm}


It is sufficient to construct a simplicial complex $\spc{S}$
such that 
\begin{itemize}
\item $\spc{S}$ is a closed $(m-1)$-dimensional homology manifold;
\item $\pi_1(\spc{S}\backslash\{v\})\ne0$ for some vertex $v$ in $\spc{S}$;
\item $\spc{S}\sim \mathbb{S}^{m-1}$; that is, $\spc{S}$ is homotopy equivalent to $\mathbb{S}^{m-1}$.
\end{itemize}

Indeed, assume such $\spc{S}$ is constructed.
Then the suspension
$\spc{R}\z=\Susp\spc{S}$
is an $m$-dimensional homology manifold with a natural triangulation coming from $\spc{S}$.
By Lemma~\ref{lem:homomanifold-characterization},
$\spc{R}$ is a topological manifold.
According to generalized Poincar\'{e} conjecture,
$\spc{R}\simeq\mathbb{S}^m$;
that is
$\spc{R}$ is homeomorphic to $\mathbb{S}^m$.
Since $\Cone \spc{S}\simeq \spc{R}\backslash\{s\}$ where $s$ denotes a south pole of the suspension 
and $\EE^m\simeq \mathbb{S}^m\backslash\{p\}$
for any point $p\in \mathbb{S}^m$
we get 
\[\Cone \spc{S}\simeq\EE^m.\]

Let us construct $\spc{S}$.
Fix an $(m-2)$-dimensional homology sphere $\Sigma$ with a triangulation such that $\pi_1\Sigma\ne0$.
According to \cite{kervaire} %it is a good readable paper, but I am sure the existance follows from sometheng written before
an example of that type exists for any $m\ge 5$.

Remove from $\Sigma$ one $(m-2)$-simplex.
Denote the obtained complex by $\Sigma'$.
Since $m\ge 5$, we have $\pi_1\Sigma=\pi_1\Sigma'$.

Consider the product $\Sigma'\times [0,1]$. 
Attach to it the cone over its boundary $\partial (\Sigma'\times [0,1])$.
Denote by $\spc{S}$ the obtained simplicial complex
and by $v$ the tip of the attached cone.

Note that $\spc{S}$ is homotopy equivalent to the spherical suspension over $\Sigma$ which is a simply connected homology sphere and hence is homotopy equivalent to $\mathbb{S}^{m-1}$.
  Hence  $\spc{S}\sim\mathbb{S}^{m-1}$.

The complement $\spc{S}\backslash\{v\}$ is homotopy equivalent to $\Sigma'$.
Therefore 
\[
\pi_1(\spc{S}\backslash\{v\})
=\pi_1\Sigma'
=\pi_1\Sigma\ne 0.
\]
That is, $\spc{S}$ satisfies the conditions above.


\parbf{Exercise~\ref{ex:set-with-smooth-bry:CBB}.}
Denote by $\Omega$ the interior of $K$; that is $\Omega=K\backslash S$.
Since $K$ is connected and its boundary is smooth, so is $\Omega$.

Recall that $k_1(p),\dots, k_{m-1}(p)$ denote the principle curvatures taken in the nondecreasing order of the surface $S$ at the point $p$. 

\parit{``if''-part.} 
Note that if $S$ is convex, then $K$ is locally convex;
that is any point $p\in K$ admits a neighborhood $U\ni p$ such that $U\cap K$ is convex.

Since $K$ is connected, by Theorem~\ref{thm:local-global-convexity}, $K$ is convex.
It follows that induced length metric on $K$ coincides with the Euclidean metric. 
In particular (3+1)-point comparison holds for any quadruple of points in $K$.

\begin{wrapfigure}{r}{20mm}
\begin{lpic}[t(-3mm),b(0mm),r(0mm),l(0mm)]{pics/pxy-nonconvex(1)}
\lbl[r]{1.75,11;$q$}
\lbl[r]{11,21;$x$}
\lbl[r]{9.5,1;$y$}
\end{lpic}
\end{wrapfigure}

\parit{``Only-if''-part.} 
If $S$ is not convex, then there is a triangle $[qxy]$ in $\EE^m$ such that two sides $[qx]$ and $[qy]$ lie in $\Omega$, but the side $[xy]$ does not completely lie in $K$.
Such a triangle can be found in the plane spanned by the normal vector $\nu(p)$ and the first principle direction at a point $p\in S$ where $k_1(p)<0$.

Clearly
\[\dist{x}{y}{K}>\dist{x}{y}{\EE^m}.
\eqlbl{eq:xy_K>xy}\]

On the other hand $[qx]$ and $[qy]$ form geodesics in $K$ and $\EE^m$.
Since $q$ lies in the interior of $K$, 
\[\mangle\hinge qxy_K=\mangle\hinge qxy_{\EE^m}.\]

If $K$ is $\Alex{0}$, then by hinge comparison (\ref{angle}) we have
\[\dist{x}{y}{K}\le\dist{x}{y}{\EE^m}.\]
The latter contradicts \ref{eq:xy_K>xy}.
\qeds





\parbf{Exercise~\ref{ex:poly-shefel}.}
If $\Omega$ is not two-convex, then there is a plane $\Pi$ in $\EE^3$ that contains a vertex $v$ of $K$ such that punctured neighborhood of $v$ in $\Pi$ lies in $\Omega$.
Choose a plane $\Pi'$ parallel and very close to $\Pi$ that cuts from the complement of $\Omega$ a little piramid $S$ with vertex~$v$.
Consider a small triangle $\triangle$ in $\Pi'$ wich surrounds the base of $S$.
Note that $\triangle$ is a geodesic triangle in $\Omega^*$
for which the point-on-side comparison \ref{cat-monoton}
fails.
That is, $\Omega^*$ is not locally $\CAT0$. %???+PIC

\parit{``if'' part.}
Since $\Omega$ is two-convex,
by Proposition~\ref{prop:stong-two-convex}, 
any point $v$ on the boundary of $K$ 
admits a conic neighborhood $U$ in $K$ 
such that the intersection $U\cap\Omega$ 
is formed by a finite collection of simply connected components.

It follows that any point $\Omega^*\backslash \Omega$ 
is locally isometric to a cone over spherical polygons.
Moreover since $\Omega$ is two-convex, 
each polygon does not contain a closed hemisphere in its interior. 
By Lemma ??? each of these spherical polygon is $\CAT1$. 
Therefore, by cone construction (\ref{thm:warp-curv-bound:cbb:a}) we get that $\Omega^*$ is locally $\CAT0$.
\qeds
