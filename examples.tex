%%!TEX root = the-examples.tex
\chapter{Subsets}

\section{Motivating examples}

Consider three subgraphs of different paraboloids
\begin{align*}
A&=\set{(x,y,z)\in\EE^3}{z\le x^2+y^2},
\\
B&=\set{(x,y,z)\in\EE^3}{z\le -x^2-y^2},
\\
C&=\set{(x,y,z)\in\EE^3}{z\le x^2-y^2}.
\end{align*}

Here is a question which motivates the rest of the chapter.


\begin{thm}{Question}
Which of the sets $A$, $B$ and $C$, if equipped with the induced length metric, form a $\CAT{0}$ space and why?
\end{thm}

The answers is given below, but it is instructive to think about this question before reading further.

\parbf{$\bm{A}$.} No, $A$ is not $\CAT0$.
 
The boundary $\partial A$ is the parabolid described by  $z=x^2+y^2$ in particular it bounds an open convex set in $\EE^3$ which complement is $A$.
The closest point projection of $A\to\partial A$ is short (see \ref{lem:closest point}).
It follows that $\partial A$ is a convex set in $A$ equipped with the induced length metric.

Therefore if $A$ is $\CAT0$ then so is $\partial A$.
The latter is not true, $\partial A$ is a smooth convex surface; by Gauss formula it has strictly positive curvature.


\parbf{$\bm{B}$.} Yes, $B$ is $\CAT0$. 

Evidently $B$ is a convex closed set in $\EE^3$. 
Therefore length metric on $B$ coinsides with Euclidean metric
and $\CAT0$ comparison holds.

\parbf{$\bm{C}$.} Yes, $C$ is $\CAT0$, 
but the proof is not as easy as before.
We give a sketch here;
a complete proof of more general statement is given in Section \ref{sec:smooth-bry}.

Consider the one-parameter family of sets 
\[V_t=\set{(x,y,z)\in\EE^3}{z\le x^2-y^2 -2\cdot (x-t)^2}.\]

\begin{wrapfigure}{r}{41mm}
\begin{lpic}[t(-5mm),b(-1mm),r(0mm),l(0mm)]{pics/K_s-0(1)}
\lbl{10,23;{\color{white}$V_{a}$}}
\lbl{20,23;{\color{white}$V_b$}}
\lbl{30,23;{\color{white}$V_c$}}
\end{lpic}
\end{wrapfigure}

Each set $V_t$ is closed, convex and
\[C=\bigcup_t V_t.\]
Further note that 
\[V_b\supset V_a\cap V_c\eqlbl{eq:VcVnV-0}\]
for any choice real numbers $a<b<c$.

The inclusion \ref{eq:VcVnV-0} makes possible to apply recursively Reshetnyak gluing theorem \ref{thm:gluing} 
and show that any finite union of $V_t$ forms a $\CAT{0}$ space.
By approximation, the $\CAT0$ point comparison holds for any 4 points in $C$;
that is, $C$ is $\CAT0$.

\parbf{Remark.}
The set $C$ is not convex, but it is two-convex as defined in the next section.
As you will see two-convexity of subsets is closely related to the inheritance of upper curvature bound by a subset.

\section{Two-convexity}

The following definition is closely related to the one given by Gromov in \cite[\S\textonehalf]{gromov:SaGMC}, see also \cite{panov-petrunin:sweeping}.

\begin{thm}{Definition}\label{def:two-convex}
We say that a subset $K\subset \EE^m$ is \index{two-convex set}\emph{two-convex}
if the following condition holds for any plane $W\subset\EE^m$.
If $\gamma$ is a closed curve in $W\cap K$ 
which is null-homotopic in $K$ then it is null-homotopic in $W\cap K$.
\end{thm}

The following proposition follows immediately from the definition.

\begin{thm}{Proposition}
Any subset in $\EE^2$ is 2-convex.
\end{thm}

The following proposition describes closed two-convex sets with smooth boundary.

\begin{thm}{Proposition}\label{prop:two-cove+smooth}
Let $K\subset \EE^m$ be a closed subset.

Assume that the boundary of $K$ forms a smooth hypersurface $S$.
Consider the orthonormal vector field $\nu$ on $S$ which points outside of $K$.
Denote by $k_1\le \dots\le k_{m-1}$ the scalar fields of principal curvatures on $S$ with respect to $\nu$.

Then $K$ is two-convex if and only if $k_2(p)\ge 0$ at any point $p\in S$.
Moreover, if $k_2(p)<0$ at some point $p$ then $K$ the Definition~\ref{def:two-convex} fails for a curve $\gamma$ forming a triangle.  
\end{thm}

\parit{Proof; ``if'' part.}
If $k_2(p)<0$ for some $p\in S$,
consider the plane $W\ni p$ which spanned by the first two principle directions.
Choose a small triangle in $W$ which surrounds $p$ and move it slightly in the direction of $\nu(p)$.
We get a triangle $[xyz]$ which is null-homotopic in $K$,
but the solid triangle $\Delta=\Conv\{x,y,x\}$ bounded by $[xyz]$ does not lie in $K$ completely.
Therefore $K$ is not two-convex.

\parit{``Only-if'' part.}
Recall that a smooth function $f\:\EE^m\to\RR$ is called \emph{strongly convex} if its Hessinan is
 positive definte at each point.

Fix a smooth strongly
convex function $f\:\EE^m\to\RR$,
such that the restriction $f|_S$ is a Morse function.
Note that generic smooth strongly convex function $f\:\EE^m\to\RR$ has this property.

For a critical point $p$ of $f|_S$ the outer normal vector $\nu(p)$ is parallel to the gradient $\nabla_pf$;
we say that $p$ is \index{positive critical point}\emph{positive critical point}
if $\nu(p)$ and $\nabla_p f$ point in the same direction 
and \index{negative critical point}\emph{negative} otherwise.
(If $\nabla_pf=0$, that is $p$ is the minimum point of $f$, then the sign is undefined.)

Since $S$ is two-convex and $f$ is convex, 
the negative critical points of $f|_S$
have index at most $1$.

Given a real value $s$, set 
\[K_s=\set{x\in K}{f(x)<s}.\]

Assume  $\phi_0\:\DD\to K$ is a continuous map of the disc $\DD$
such that $\phi(\partial \DD)\subset K_s$.
By Morse Lemma, 
there is a homotopy $\phi_t\:\DD\to K$ such that 
$\phi_1(\DD)\subset K_s$.

Consider a closed curve $\gamma\:\SS^1\to K$ which is null-homotopic in $K$.
Note that the distance function $f_0(x)=\dist{\Conv\gamma}{x}{\EE^m}$ is convex.
Therefore $f_0$ can be approximated by smooth strongly convex function $f$ such that the restriction $f|_S$ is a Morse function.
From above the there is a disc in $K$ with boundary $\gamma$
which lies arbitrary close to $\Conv\gamma$.
Since $K$ is closed, the statement follows.
\qeds

\begin{thm}{Proposition}\label{prop:two-hull}
Intersection of arbitrary collection of two-convex sets in $\EE^m$ is two-convex.
\end{thm}

\begin{thm}{Proposition}\label{prop:two-hull-open}
Interior of any two-convex set in $\EE^m$ is a two-convex set.
\end{thm}

\parit{Proofs.}
The Proposition \ref{prop:two-hull} is evident.

To prove Proposition \ref{prop:two-hull-open}, apply the Definition~\ref{def:two-convex} for parallel translations of the curve $\gamma$ by small vectors.
\qeds

\begin{thm}{Definition}
Given a subset $K\subset \EE^m$ define its two-convex hull (briefly $\Conv_2K$) as the intersection of all two-convex subsets containing $K$.
\end{thm}

Note that by Proposition~\ref{prop:two-hull},
two-convex hull of any set is two-convex.
Further, 
by Proposition~\ref{prop:two-hull-open}, 
two-convex hull of open set is open.

\section{Sets with smooth boundary}\label{sec:smooth-bry}

In this section we characterize the subsets in $\EE^m$ with smooth boundary which form $\CAT{0}$ spaces. 


\begin{thm}{Theorem}\label{thm:set-with-smooth-bry:CBA}
Let $K$ be a closed connected subset in $\EE^m$ equipped with the induced length metric.
Assume $K$ is bounded by a smooth hypersurface.
Then 
$K$ is $\CAT0$ if and only if $K$  is two-convex.
\end{thm}

This theorem is a baby case of the main result in \cite{a-b-b:CBA-m-w-b}, it is discussed in the end of chapter. 

\parit{Proof.}
Denote by $S$  and by $\Omega$ the boundary and the interior of $K$. 
Since $K$ is connected and $S$ is smooth, $\Omega$ is also connected.

Denote by $k_1(p)\le\dots\le k_{m-1}(p)$ the principle curvatures of $S$ at $p\in S$ with respect to the normal vector pointing out of $K$.
By Proposition~\ref{prop:two-cove+smooth}, $K$ is two-convex if and only if $k_2(p)\ge 0$ at any $p\in S$.

\parit{``Only-if'' part.}
Assume $K$ is not two-convex.
Then by Proposition~\ref{prop:two-cove+smooth}, there is a triangle $[xyz]$ in $K$ which is null-homotopic in $K$,
but the solid triangle $\Delta=\Conv\{x,y,z\}$ does not lie in $K$ completely.


If $K$ is a complete length $\CAT0$ space,
then by Reshetnyak majorization theorem,
there is a short map $f\:\Delta\to K$ which preserves $x$, $y$ and $z$.

Note that the map $f$ has to be identity.
In particular $\Delta \subset K$, a contradiction.

\parit{``If'' part.}
Since $K$ is simply connected,
by Cartan--Hadamard theorem \ref{thm:hadamard-cartan}, 
it is sufficient to show that $K$ is locally $\CAT0$.

If $p\in\Int K$ then it admits a neighborhood isometric to a subset of $\EE^m$, which is $\CAT0$.

Fix $p\in S$.
Assume that $k_2(p)>0$.
Fix sufficiently small $\eps>0$ and set $K'=K\cap \cBall[p,\eps]$.
Let us show that 

\begin{clm}{}\label{K'-is-CAT}
$K'$ is $\CAT0$.
\end{clm}

Consider the coordinate system with the origin at $p$
and the principle directions and $\nu(p)$ as the coordinate directions.
For small $\eps>0$, the set $K'$ 
can be described as a subgraph
\[K'
=
\set
{(x_1,\dots,x_m)\in \cBall[p,\eps]}
{x_m\le f(x_1,\dots,x_{m-1}}.\]
Moreover, since $\eps$ is small and $k_2(p)>0$, 
for any fixed $s\in[-\eps,\eps]$ the function 
\[(x_2,\dots,x_{m-1})\mapsto f(s,x_2,\dots,x_{m-1})\]
is concave for $|x_i|<2\cdot\eps$ for each $i$

Fix a negative real value $\lambda<k_1(p)$.
Given $s\in (-\eps,\eps)$,
consider the set 
\[V_s
=
\set
{(x_1,\dots,x_m)\in K'}
{x_m\le f(x_1,\dots,x_{m-1})+\lambda\cdot (x_1-s)^2}.\]
Note that the function 
\[(x_1,\dots, x_{m-1})\mapsto f(x_1,\dots,x_{m-1})+\lambda\cdot (x_1-s)^2\]
is concave near the origin.
Since $\eps$ is small, we can assume that $V_s$ forms a convex set in $\EE^m$ for any $s$.

Further note that 
\[K'=\bigcup_{s\in[-\eps,\eps]}V_s\]
and
\[V_b\supset V_a\cap V_c\eqlbl{eq:VcVnV}\]
for any choice real numbers $a<b<c$.

Given an array of values $s^1<\dots<s^\kay$ in $[-\eps,\eps]$,
set $V^i=V_{s^i}$ and
consider the unions 
\[W^i=V^1\cup\dots\cup V^i\]
equipped with the induced intrinsic metric.

\begin{center}
\begin{lpic}[t(1mm),b(1mm),r(0mm),l(0mm)]{pics/K_s(1)}
\lbl{6,18;{\color{white}$V^1$}}
\lbl{26,17;{\color{white}$\dots$}}
\lbl{48,18;{\color{white}$V^\kay$}}
\end{lpic}
\end{center}

Note that the array $(s^n)$ can be chosen in such a way that 
$W^\kay$ is arbitrary close to $K'$.

Therefore, in order to prove \ref{K'-is-CAT}, 
it is sufficient to show the following.
\begin{clm}{}
All $W^i$ form complete length $\CAT{0}$ spaces.
\end{clm}

This claim is proved by induction.
Base: $W^1=V^1$ is a $\CAT{0}$ space as a convex subset in $\EE^m$.

Step: assume that $W^i$ is $\CAT0$.
According to \ref{eq:VcVnV}
\[V^{i+1}\cap W^i=V^{i+1}\cap V^i.\] 
Moreover, this set forms a convex set in $\EE^m$ 
and therefore it is a convex set in $W^i$ and in $V^{i+1}$.
By Reshetnyak's gluing theorem, $W^{i+1}$ is $\CAT0$.
Hence the claim follows.
\claimqeds

Note that we proved the following
\begin{clm}{}\label{clm-strong2convex}
$K$ is $\CAT0$ if $K$ is \index{strongly two-convex set}\emph{strongly two-convex};
that is $k_2(p)>0$ at any point $p\in S$.
\end{clm}


It remains to show that $p$ admits a $\CAT0$ neighborhood in the case $k_2(p)=0$.

Choose a coordinate system $(x_1,\dots,x_n)$ as above,
so $(x_1,\dots,x_{m-1})$-coordinate hyperplane forms the tangent subspace to $S$ at $p$.

Fix $\eps>0$ so that a neighborhood of $p$ in $S$ 
forms a graph
\[x_m= f(x_1,\dots,x_{m-1})\]
for a function $f$ defined at the open ball $B$ of radius $\eps$  centered at the origin in the $(x_1,\dots,x_{m-1})$-hyperplane.
Fix a smooth positive strongly convex function $\phi\:B\to \RR_+$
such that $\phi(x)\to\infty$ as $x$ approaches the boundary $B$.
Note that for $\delta>0$, the subgraph $K_\delta$ defined by the inequality
\[x_m\le f(x_1,\dots,x_{m-1})-\delta\cdot\phi(x_1,\dots,x_{m-1})\]
is strongly two-convex.
By \ref{clm-strong2convex}, $K_\delta$ is $\CAT0$.

Finally as $\delta\to0$, the closed $\eps$-neighborhoods of $p$ in $K_\delta$ 
converges to the closed $\eps$-neighborhood of $p$ in $K$.
That is, $p$ admits a closed $\CAT0$ neighborhood in $K$.
\qeds

The following $\Alex{}$ analog of the above theorem; 
its proof is simpler.

\begin{thm}{Exercise}\label{ex:set-with-smooth-bry:CBB}
Let $K$ be a closed connected subset in $\EE^m$ equipped with the induced length metric.
Assume that the $\Int K$ is dense in $K$.
Show that 
$K$ is $\Alex0$ if and only if $K$ is convex. 
\end{thm}

\section{Open sets of Euclidean plane}

In this section we will consider inheritance of upper curvature bound by subsets of Euclidean plane.

\begin{thm}{Theorem}\label{thm:bishop-plane}
Let $\Omega$ be an open simply connected subset of $\EE^2$.
Equip $\Omega$ with induced length metric and denote by 
by $K$ its completion.
Then $K$ is $\CAT0$.
\end{thm}

The assumption that the set $\Omega$ is not critical,
instead one ca assume that the induced length metric takes finite values at all points of $\Omega$.
We sketch the proof from Bishop's note \cite{bishop:jordan} and suggest to finish the details as an exercise.


\parit{Sketch of proof.}
It is sufficient to show that any triangle in $K$ is thin,
as defined in \ref{def:k-thin}.

Note that $K$ admits a length-preserving map to $\EE^2$ which extends the embedding $\Omega\hookrightarrow\EE^2$.
Therefore the triangle $[xyz]$ can be mapped to the plane in a length-preserving way.
Since $\Omega$ is simply connected, any open region, say $\Delta$, surrounded by the image of $[xyz]$ completely lies in $\Omega$.

\begin{wrapfigure}{r}{26mm}
\begin{lpic}[t(-0mm),b(0mm),r(0mm),l(0mm)]{pics/bishop-triangle(1)}
\end{lpic}
\end{wrapfigure}

Note that in each triangle $[xyz]$ in $K$ the sides $[xy]$, $[yz]$ and $[zx]$ intersect each other along a geodesic starting at common vertex; possibly a one-point geodesic.
In other words, every triangle in $K$ look like one on the diagram. 

Assuming contrary, there will be a diangle in $K$;
that is two minimizing geodesics with common ends, but no other common points.
The image of this diangle in the plane have to bound an open region of $\Omega$ and both sides of the region have to be concave, otherwise one could shorten the sides by pushing them into $\Omega$.
Evidently, there is no plane diangle with concave sides, a contradiction.

Note that it is sufficient to consider only injective triangle $[xyz]$;
that is the sides $[xy]$, $[yz]$ and $[zx]$ intersect each other only at the common vertexes.
If this is not the case, chopping the overlapping part of sides reduces to the injective case.

Again, the open region, say $\Delta$, bounded by the image of $[xyz]$  has concave sides, otherwise one could shorten the sides by pushing them into $\Omega$.
It remains to show that any triangle with concave sides is thin.
The latter is left to the reader.
\qeds

Here is a spherical analog of above lemma;
which can be proved along the same lines.
It will be used in the next section. 

\begin{thm}{Exercise}\label{ex:bishop-sphere}
Let $\Theta$ be an open connected subset of the unit sphere $\SS^2$ which does not contain a closed hemisphere.
Equip $\Theta$ with induced length metric.
Let $\tilde \Theta$ be a metric covering of $\Theta$ 
such that any closed curve in $\tilde \Theta$ of length smaller than $2\cdot\pi$ is contactable.

Show that the completion of $\tilde \Theta$ is $\CAT{1}$.
\end{thm}

\section{Open sets of Euclidean space}

The material below is inspired by work of Samuel Shefel who seems to be very intrigued by survival of metric properties under affine transformation.
To describe an instance of such phenomena,
note that two-convexity survives under affine transformations of Euclidean space.
Therefore, as a consequence of Theorem~\ref{thm:set-with-smooth-bry:CBA}, the following holds.

\begin{thm}{Corollary}
Let $K$ be closed connected subset of Euclidean space 
equipped with the induced length metric.
Assume $K$ is bounded by a smooth hypersurface and it forms a $\CAT{0}$ space. 
Then any affine transformation of $K$ also forms a $\CAT{0}$ space.
\end{thm}

By Corollary~\ref{cor:shefel}, an analogous statement holds for sets bounded by Lipschitz surfaces in three-dimensional Euclidean space.
In higher dimensions this is not longer true.

Here is the main theorem of the section.

\begin{thm}{Shefel's Theorem}\label{thm:shefel}
Let $\Omega$ be an open set $\EE^3$.
Equip $\Omega$ with the induced length metric
and denote by $K$ the completion of universal metric cover of $\Omega$.
Then $K$ is $\CAT0$ 
if and only if $\Omega$ is two-convex.
\end{thm}

The following exercise shows that analogous statement does not hold in higher dimensions.

\begin{thm}{Exercise}\label{ex:two-planes}
Let $\Pi_1,\Pi_2$ be two planes in $\EE^4$ intersecting at single point.
Consider the complement $\Omega=\EE^4\backslash(\Pi_1\cup\Pi_2)$
equipped with induced length metric
denote by $K$ the universal metric cover of $\Omega$.

Show that 

\begin{subthm}{}
$\Omega$ is two-convex.
\end{subthm}

\begin{subthm}{}
$K$ is $\CAT0$ if and only if $\Pi_1\perp\Pi_2$.
\end{subthm}
\end{thm}

Before coming to the proof of Shefel's theorem, 
let us formulate few corollaries.
The following corollary look more like a generalization of Theorem \ref{thm:set-with-smooth-bry:CBA} for three-dimensional Euclidean space.

\begin{thm}{Corollary}\label{cor:shefel}
Let $K$ be a closed subset in $\EE^3$ 
bounded by a Lipschitz hypersurface.
Then $K$ with the induced length metric is $\CAT0$  
if and only if the interior of $K$ is two-convex and simply connected.
\end{thm}

\parit{Proof.}
Set $\Omega=\Int K$.
Since $K$ is simply connected and bounded by a surface, 
$\Omega$ is also simply connected.

Apply Shefel's Theorem to $\Omega$.
Note that the completion of $\Omega$ equipped with the induced length metric 
is isometric to $K$ with induced intrinsic metric.
Hence the result follows.
\qeds

The following corollary is the main statement in Shefel's original paper \cite{shefel-3D}.

Let $U$ be an open set in $\RR^2$.
Recall, that a continuous function $f\:U\to\RR$ is called \index{saddle function}\emph{saddle} if for any linear function $\ell\:\RR^2\to\RR$ the difference 
$f-\ell$
does not have local maxima and minima in $U$.
Equivalently, open subgraph and epigraph of $f$ 
\begin{align*}
&\set{(x,y,z)\in\EE^3}{z<f(x,y),\ (x,y)\in U},
\\
&\set{(x,y,z)\in\EE^3}{z>f(x,y),\ (x,y)\in U}
\end{align*}
form a two-convex subsets in $\EE^3$

\begin{thm}{Corollary}
Let $f\:\DD\to \RR$ be a Lipschitz function which is saddle in the interior of the closed unit disc $\DD$. 
Then the graph
$z=f(x,y)$ in $\EE^3$ equipped with induced length metric is a $\CAT{0}$ space.
\end{thm}

\parit{Proof.}
Since the function $f$ is Lipschitz,
its  graph $\Gamma$ with the induced length metric is bi-Lipschitz to the Euclidean metric on $\DD$.

Consider the sequence of sets 
\[K_n
=
\set{(x,y,z)\in \EE^3}{z\lege f(x,y)\pm\tfrac1n,\ (x,y)\in \DD}.\]
Note that each $K_n$ is closed, simply connected and two-convex. Moreover the boundary of $K_n$ forms a Lipschitz surface.

Equip $K_n$ with induced length metric.
By Corollary~\ref{cor:shefel},
$K_n$ is $\CAT0$.
It remains to note that as $n\to\infty$ the sequence of space $K_n$ converges to $\Gamma$ in the sence of Gromov--Hausdorff.
\qeds

Now we are back to the proof of Shefel's theorem \ref{thm:shefel}.

Recall, that a subset $P$ of $\EE^m$ is called \index{polytope}\emph{polytope} 
if it can be presented as a union of finite number of simplices.
Similarly,
a \index{spherical polytope}\emph{spherical polytope}
is a union of finite number of simplices in $\mathbb{S}^m$.

\begin{wrapfigure}{r}{29mm}
\begin{lpic}[t(-4mm),b(0mm),r(0mm),l(0mm)]{pics/polytope(1)}
\end{lpic}
\end{wrapfigure}

Note any polytope admits a finite triangulation.
Therefore any polytope equipped with induced intrinsic metric 
forms a Euclidean polyhedral space as defined in \ref{def:poly}.

Let $P$ be a polytope and $\Omega$ its interior,
both considered with induced intrinsic metric.
Typically the completion $K$ of $\Omega$ 
is isometric to $P$.
However in general
we only have locally distance preserving map $K\to P$;
it does not have to be onto and it may be not injective. 
An example can be guessed from the picture.

It is easy to see that $K$ is a polyhedral spaces.


\begin{thm}{Lemma}\label{lem:poly-shefel}
Shefel's Theorem~\ref{thm:shefel} holds if the set $\Omega$ is formed by interior of a polytope.
\end{thm}

The statement might look obvious, but there is an underwater stone in the proof.

\parit{Proof.}
Denote by $\tilde\Omega$ the universal metric cover of $\Omega$.
Let $\tilde K$ and $K$ be the completion of $\tilde\Omega$ and  $\Omega$ correspondingly.

Note that $K$ is a polyhedral space and the covering $\tilde\Omega\to\Omega$ extends to a covering map $\tilde K\to K$ which might be branching at some vertexes.

Fix a point $\tilde p\in \tilde K\backslash\tilde\Omega$; 
denote by $p$ the image of $\tilde p$ in $K$.
By Hadamard--Cartan theorem (\ref{thm:hadamard-cartan}) it is sufficient to show that 

\begin{clm}{}\label{eq:curv=<0}
$\tilde p$ admits a $\CAT0$ neighborhood.
\end{clm}


Recall that $\Sigma_{\tilde p}\tilde K$ denotes the space of directions at $\tilde p$.
Note that a small neighborhood of $\tilde p$ in $\tilde K$
isometric to an open set in the cone over $\Sigma_{\tilde p}\tilde K$.
By the cone property (\ref{thm:warp-curv-bound:cbb:S}), \ref{eq:curv=<0} follows if 

\begin{clm}{}\label{eq:curv=<1}
$\Sigma_{\tilde p}\tilde K$ is a complete length $\CAT1$ space.
\end{clm}

By  rescaling, we can assume every face of $K$ which does not conatin $p$ lies on the distance at least 2 from $p$.
Denote by $\SS^2$ the unit sphere centered at $p$,
set $\Theta=\SS^2\cap\Omega$.
Note that $\Sigma_pK$ is isomeric to the completion of $\Theta$
and $\Sigma_{\tilde p}\tilde K$ is a completion of a regular metric covering $\tilde\Theta$ of $\Theta$ which is induced by universal metric cover $\tilde \Omega\to \Omega$.

By Exercise \ref{ex:bishop-sphere}, it remains to show that the following.
\begin{clm}{}
Any closed curve in $\tilde\Theta$ of length less than $2\cdot\pi$ is contactable.
\end{clm}


Consider a colsed curve $\tilde \gamma$ of length $<2\cdot\pi$ in $\tilde\Theta$.
Its projection $\gamma$ in $\Theta\subset\SS^2$ has the same length.
Therefore by Hemisphere lemma~\ref{lem:hemisphere}, $\gamma$ lies in an open hemisphere.
Then for a plane $\Pi$ close to $p$,
the central projection $\gamma'$ of $\gamma$ to $\Pi$ is defined and lies in $\Omega$.
From two-convexity of $\Omega$, the curve $\gamma'$ is contractible in $\Pi\cap \Omega$.
It follows that $\gamma$ is contractible in $\Theta$ 
and therefore $\tilde\gamma$ is contractible in $\tilde\Theta$.
\qeds

The following proposition 
describes a construction which was essentially given by Shefel in \cite{shefel-3D}.
It produce $\Conv_2 \Omega$ for an open set $\Omega\subset\EE^3$.

\begin{thm}{Proposition}\label{prop:2-conv-construction}
Let $\Pi_1,\Pi_2\dots$ be an everywhere dense
sequence of planes in $\EE^3$.
Given an open set $\Omega$ consider 
the recucevly defined sequence of open sets 
$\Omega=\Omega_0\subset\Omega_1\subset\dots$ 
such that 
$\Omega_n$ is the union of $\Omega_{n-1}$ 
and all the bounded compontnets of 
$\EE^3\backslash(\Pi_n\cup \Omega_{n-1})$.
Then 
\[\Conv_2\Omega=\bigcup_n\Omega_n.\]

\end{thm}

\parit{Proof.}
Set 
\[\Omega'=\bigcup_n\Omega_n.\]
Note that $\Omega'$ is a union of open set, in particular it is open.

The inclusion $\Conv_2\Omega\supset\Omega'$
is evident.

It remains to show that $\Omega'$ is two-convex.
Assume contrary; 
that is, there is a plane $\Pi$ 
and a closed curve $\gamma\:\SS^1\to \Pi\cap \Omega'$ 
which is null-homotopic in $\Omega'$,
but not null-homotopic in $\Pi\cap\Omega'$.

By approximation we can assume that $\Pi=\Pi_n$ for a sufficiently large $n$ 
and that $\gamma$ lies in $\Omega_{n-1}$.
The latter contradicts the $n$-th step in the construction. 
\qeds



\begin{thm}{Key lemma}\label{lem:key-shefel}
The two-convex hull of the interior of polytope in $\EE^3$
is an interior of a polytope.
\end{thm}

\parit{Proof.}
Fix a polytope $P$ in $\EE^3$.
Set $\Omega=\Int P$, we can assume that $\Omega$ is dense in $P$
Denote by $F_1,\dots,F_m$ the facets of $P$.

Set $\Omega'=\Conv_2\Omega$ and let $P'$ be the closure of $\Omega'$.
Further, 
for each $i$, 
set $F'_i=F_i\backslash \Omega'$.
In other words, 
$F'_i$ is the subset of facet $F_i$ 
which remains on the boundary of $K'$.

From the construction of two-convex hull (\ref{prop:2-conv-construction})

\begin{clm}{}\label{clm:F'-convex}
$F'_i$ is convex subset of $F_i$.
\end{clm}

Further, since $\Omega'$ is two-convex,
we get the following.

\begin{clm}{}\label{clm:complement-of-F'-convex}
Each connected component of the complement $F_i\backslash F'_i$ is convex.
\end{clm}

Indeed, assume a connected component $A$ of $F_i\backslash F'_i$ fails to be convex.
Then there is a suppoiting line $\ell$ to $A$ touching $A$ at a single point in the interior of $F_i$.
Then one could rotate the plane of $F_i$ slightly arounf $\ell$ and move it parallel to cut a hat from the complement of $\Omega$.
The latter means that $\Omega$ is not two-convex, 
a contradiction.
\claimqeds

From \ref{clm:F'-convex} and \ref{clm:complement-of-F'-convex}, we get that 

\begin{clm}{}$F'_i$ is a convex polygon for each $i$.
\end{clm}

Consider the complement 
$\EE^3\backslash \Omega$ 
equipped with the length metric.
By construction of two-convex hull (\ref{prop:2-conv-construction}), 
the complement $L=\EE^3\backslash (\Omega'\cup K)$
is locally convex;
that is, any points of $L$ admits a convex neighborhood.

Summarizing (1)
$\Omega'$ is a 2-convex open set,
(2) the boundary $\partial\Omega'$ 
contains a finite number of polygons $F_i'$
and the remaing part is locally concave.
It remains to show that (1) and (2) imply that $\partial\Omega'$
is piecewise linear.

The proof of the last statement is left to the reader.%???MORE???
\qeds

\parit{Proof of \ref{thm:shefel}.}
Note that it is sufficient to show that
$\CAT0$ comparison holds for any
4 points $x^1,x^2,x^3,x^4\in\Omega$.

Fix $\eps>0$.
Choose six broken lines connecting all the pairs of points $x^1,x^2,x^3,x^4$ such that length of each at most $\eps$ bigger than 
the distance between its ends in the length metric on $\Omega$.
Choose a polytope $P$ 
in $\Omega$ such that the interior $\Int P$ is simply connected 
and  it contains all these six broken lines.

Denote by $\Omega'$ the two-convex hull of the interior of $P$.
According to Key Lemma (\ref{lem:key-shefel}) $\Omega'$ is an interior of a polytope.

Equip $\Omega'$ with the induced length metric.
Consider the universal metric cover $\tilde\Omega'$ of $\Omega'$.
(The covering $\tilde\Omega'\to\Omega'$ might be nontrivial;
despite that $\Int P$ is simply connected, its two-convex hull $\Omega'$ might be not simply connected.)
Denote by $\tilde K'$ the completion of $\tilde\Omega'$.

By Lemma~\ref{lem:poly-shefel}, $\tilde K'$ is $\CAT0$.

Since $\Int P$ is simply connected, the embedding $\Int P\hookrightarrow \Omega'$
admits a lifting $\iota\:\Int P\hookrightarrow \tilde K'$.
By construction, $\iota$ almost preserves the distances between the points $x^1,x^2,x^3,x^4$;
namely 
\begin{align*}
\dist{\iota(x^i)}{\iota(x^j)}{L}\gele \dist{x^i}{x^j}{\Int P}\pm\eps.
\end{align*}

Since $\eps>0$ is arbitrary and $\CAT0$ comparison holds in $\tilde K'$,
we get that $\CAT0$ comparison holds in $\Omega$ for $x^1,x^2,x^3,x^4$.

The statement follows since the quadruple $x^1,x^2,x^3,x^4\in\Omega$ is arbitrary.
\qeds

\begin{thm}{Exercise}
Assume $K\subset\EE^m$ is a closed set bounded by a Lipschitz hypersurface.
Equip $K$ with the induced length metric.
Show that if $K$ is $\CAT0$ then $K$ is two-convex.
\end{thm}

The following exercise is analogous to Exercise~\ref{ex:two-planes}.
It provides a counterexample to the analog of Corollary~\ref{cor:shefel} in higher dimensions.


\begin{thm}{Exercise}
Let $K=W\cap W'$, where 
\[W=\set{(x,y,z,t)\in \EE^4}{z\ge -x^2-y^2}\]
and $W'=\iota(W)$ for some motion $\iota\:\EE^4\to\EE^4$.

Show that $K$ is always two-convex and one can choose $\iota$ so that $K$  with the induced length metric is not $\CAT0$.
\end{thm}







\section[Convex hypersurfaces]{Convex hypersurfaces\\ in Riemannian manifolds}

\begin{thm}{Theorem}\label{thm:buyalo} 
Let $M$ be an $m$-dimensional Riemannian manifold 
with sectional curvature $\ge \kappa$ 
and $F\subset M$ be a convex hypersurface equipped with the length-metric;
that is, $F$ bounds a convex set. 
Then $F$ be an $(m-1)$-dimesnional complete length $\Alex{\kappa}$ space.
\end{thm}

This theorem, in a slightly weaker form was proved in by Buyalo in \cite{buyalo:convex-surface}, 
and then its statement was made more exact in \cite{akp}.

\begin{thm}{Lemma}\label{lem:smoothing}
Let $M$ be a Riemannian manifold and $f\:M\subto\RR$ be a locally Lipshits $\lambda$-concave subfunction. 
Then there is a sequence of smooth subfunctions $f_n\:M\subto\RR$ and $\lambda_n\in\RR$ such that $f_n\to f$ and $\lambda_n\to \lambda$ as $n\to\infty$ and each $f_n$ is $\lambda_n$-concave.
\end{thm} 

This lemma is a slight generalization of \cite[Theorem 2]{greene-wu}
by Greene and Wu;
it can be proves the same way.
%???Should we include the proof???

\parit{Proof of theorem \ref{thm:buyalo}}. 
Without loss of generality one can assume that 
\begin{enumerate}
\item \label{k>=-1}$\kappa\ge -1$, 
\item $F$ bounds a compact convex set $C$ in $M$, 
\item there is a function $h$ defined in a neighborhood of $C$ such that $h''\le -2$ and $|h(x)|<1/10$ for any $x\in C$,
\item \label{property:unique} there is unique geodesic between any two points in $C$. 
\end{enumerate}
(If not, rescale and pass to the boundary of the convex piece cut by $F$  from a small convex ball centered at $x\in F$, taking $h=-10\cdot\dist[{{}}]{x}{}{}$.)

Consider the function $f=\distfun{F}{}{}$.
By Rauch comparison 
(as it is stated in Petersen's book \cite[11.4.8]{petersen:RiemGeom}), 
for any unit-speed geodesic $\gamma$ in the interior of $C$, $(f\circ\gamma)''$ is bounded in the barrier sense by the corresponding value in the model case --- when $M\iso\Lob2{-1}$ and $F$ is a geodesic.  
In particular,
\[(f\circ\gamma)''\le f\circ\gamma.\]


Therefore $f+\eps\cdot h$ is $(-\eps)$-concave in 
$\Omega_\eps=f^{-1}((0,\eps))\cap C$.
Take 
\[K_\eps\z=f^{-1}([\tfrac{1}{3}\cdot\eps,\tfrac{2}{3}\cdot\eps])\cap C.\]
Applying Lemma~\ref{lem:smoothing}, we can find a smooth $(-\tfrac\eps2)$-concave function $f_{\eps}$ which is arbitrarily close to $f+\eps\cdot h$ on $K_\eps$ and which is defined on a neighborhood of $K_\eps$. 
Take a regular value $\theta_\eps\approx\tfrac{1}{2}\cdot\eps$ of $f_\eps$. (In fact one can take $\theta_\eps=\tfrac{1}{2}\cdot\eps$, but it requires a little work.) 
Since $|(h|C)|<1/10$, the level set $F_\eps=f_{\eps}^{-1}(\theta_\eps)$ will lie entirely in $K_\eps$.
Therefore $F_\eps$ forms a smooth closed convex hypersurface.

Let us denote by $\rho$ and $\rho_\eps$ the length-metrics on  correspondingly $F$ and $F_\eps$.
By the Gauss formula, $(F_\eps,\rho_\eps)$ has curvature $\ge\kappa$.
Further, $F_\eps$ bounds a compact convex set $C_\eps$ 
and $F_\eps\to F$, $C_\eps\to C$ in Hausdorff sense as $\eps\to 0$. 
By property (\ref{property:unique}), the restricted metrics from $M$ to $C$ and to $C_\eps$ are length-metrics.
Thus, $C_\eps$ is an Alexandrov space with $F_\eps$ as boundary, that converges in Gromov--Hausdorff sense to $C$.  It follows from ???  that $(F_\eps,\rho_\eps)$  converges in Gromov--Hausdorff sense to $(F,\rho)$.
Therefore $(F,\rho)$ is an Alexandrov space with curvature $\ge \kappa$.\qeds

\section{Comments and open problems}

\parbf{Sets with smooth boundary.}
In \cite{a-b-b:CBA-m-w-b} Alexander, Bishop and Berg gave the exact upper bound on Alexandrov's curvature for the Riemannian manifolds with boundary.
Namely they show the following.

\begin{thm}{Theorem}
Let $M$ be a Riemannian manifold with boundary $\partial M$.
A direction tangent to the boundary will be called concave if there is a short geodesic in this direction which leaves the boundary and goes into interior of $M$.
A sectional direction will be called concave if all the directions in it are concave.

Then $M$ is locally $\Alex\kappa$, where $\kappa$ is the infimum of sectional curvatures in $M$ and  the curvatures of $\partial M$ in the concave directions.
\end{thm}

\begin{thm}{Corollary}
Let $M$ be a Riemannian manifold with boundary $\partial M$. 
Assume all the sectional curvatures of $M$ and $\partial M$ are bounded from above by $\kappa$.
Then $M$ is locally $\Alex\kappa$.
\end{thm}

A surface $S$ in $\EE^3$ is called saddle if for any linear function $f\:\spc{X}\to\RR$,
the restriction $f|S$ has no local maxima or maxima in the interior of $S$.

\parbf{Nonsmooth sets.}

\begin{thm}{Shefel's conjecture}
Any saddle hypersurface in $\RR^3$ equipped with the length-metric has curvature $\le 0$ at any point.
\end{thm} 

From Corollary \ref{cor:shefel}, it follows that if there is a counterexample then arbitrary neighborhood of some point of the surface can not be presented as graph in any coordinate system.

Further more, if a counterexample exists,
then it forms a piece of boundary of a two-convex set $\Omega$ with the following property. 
There is a point $p\in\partial \Omega$ and $\eps>0$ 
such that for any $\delta>0$  we have
\[\oBall(p,\eps)\subset\Conv_2[\Omega\cup \oBall(p,\delta)].\]
None of such examples of $\Omega$ are known so far.

A surface $S$ in a metric space.
We say that $S$ is saddle if for any convex function $f\:\spc{X}\to\RR$,
the restriction $f|S$ has no local maxima in the interior of $S$.

\begin{thm}{Generalized Shefel's  conjecture}
Any 2-dimensional saddle surface in a complete length $\CAT\kappa$ space
equipped with the length-metric is locally $\CAT\kappa$.
\end{thm}

A subset $K$ is called strongly two-convex if any null-homotopic circle $\gamma\:\SS^1\to K$ is also null-homotopic in $K\cap \Conv[\gamma(\SS^1)]$.

\begin{thm}{Question}
Is it true that any closed strongly two-convex set with dense interior bounded by a Lipschitz hypersurface in $\EE^m$ forms a $\CAT{0}$ space? 
\end{thm}

\parbf{Metric minimizing surfaces.}
In \cite{petrunin-metricmin} was shown that discs in complete length $\CAT{0}$ spaces 
which do not admit a length-decreasing deformations with fixed boundary form $\CAT{0}$ spaces.

Any metric minimizing disc forms a saddle surface as defined above.
There are saddle surfaces which are not metric minimizing globally and it is expected that there saddle surfaces which are not metric minimizing in arbitrary neighborhood of a fixed point.
Constructing such examples could shed light on the Shefel's question.

\parbf{On convex hypersurfaces in Alexandrov space.}
We are not aware of any proof of theorem \ref{thm:buyalo} which is not based on the Gauss formula.

Even if the ambient space is Euclidean, we do not know any proof which avoids approximation by simpler spaces;
the synthetic argument of Anatoliy Milka in \cite{milka-conv} is very intersting, 
but still it requires approximation.

Finding such a proof would be interesting on its own, and also could lead to the generalization of theorem \ref{thm:buyalo} to the case when $M$ is an Alexandrov space.
The latter problem is one of the first questions in $\Alex{}$ spaces which is still open.

\begin{thm}{Question}
Let $\spc{L}$ be a complete length $\Alex{\kappa}$ space of finite dimension $m$ and its boundary $\partial\spc{L}$ is not empty.
Is it true that $\partial\spc{L}$ equipped with induced length metric forms a complete length $\Alex{\kappa}$ space of finite dimension $m-1$?
\end{thm}

Equivalently one can ask, is it true that convex hypersurface in a finite dimensional complete length $\Alex\kappa$ space without boundary is an $\Alex{\kappa}$ space?

