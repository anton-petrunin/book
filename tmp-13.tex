%%!TEX root = the-defs-CBA.tex
%%array^

\section{Dual-(1+3)-point comparison.}\label{sec:dual-1+3}



The idea that ``the essence of curvature lies in the general notion of a convex metric space and of a quadruple of points in such a space'' apparently originated with Wald \cite[p.17]{menger:wald}. A metric space has \emph{Wald curvature} $\kappa(p)$ at $p$  if  any quadruple in a sufficiently small neighborhood of $p$ embeds in $\Lob3\kappa$ where $\kappa$ is arbitrarily close to $\kappa(p)$.  Wald proved that any compact geodesic metric space which at every point admits a Wald curvature $\kappa(p)$ is a surface for which $\kappa(p)$ is the Gaussian curvature \cite{wald}. %??? I do not think so, A. 
  
This section gives a $4$-point definition of  $\Cat{}{\kappa}$ (Theorem \ref{thm:alternate-cat-def}) that plays a dual role to our definition of $\CBB{}{\kappa}$ (Definition \ref{df:cbb1+3}).  
The duality relates to Wald's idea of embedding quadruples in model spaces. 


\begin{thm}{Definition}\label{def:alt-cba}
Let $\spc{X}$ be a metric space.
A quadruple $p,x^1,x^2,x^3$ of points in $\spc{X}$ 
is said to satisfy \emph{dual-(1+3)-point $\kappa$-comparison at the vertex $p$} if
\[
\angk\kappa p{x^i}{x^j}\le \angk\kappa p{x^\kay}{x^i} + \angk\kappa p{x^\kay}{x^j}, 
\]
for any permutation $(i,j,\kay)$ of $(1,2,3)$
or at least one of the model angles $\angk\kappa p{x^i}{x^j}$  is not defined.
\end{thm}

We say the inequality \ref{def:alt-cba} \emph{holds as an equality} if in addition, equality holds for some choice of $i,j$.

Recall the (1+3)-point comparison (\ref{df:1+3}) that we used to define $\CBB{}{\kappa}$:
%{df:cbb1+3}

\begin{thm}{Definition}\label{def:cbb} 
In a metric space, a quadruple $Q\:p,x^1,x^2,x^3$ is said to satisfy \emph{(1+3)-point $\kappa$-comparison at   $p$} if 
\[\angk{\kappa} p{x^1}{x^2}+\angk{\kappa} p{x^2}{x^3}+\angk{\kappa}p{x^3}{x^1}\le 2\cdot \pi,
\]
or at least one of the model angles $\angk\kappa p{x^i}{x^j}$  is not defined.
\end{thm}

Conditions \ref{def:alt-cba} and \ref{def:cbb} are dual in the sense that together they force the three model angles at $p$ to be the sidelengths of a triangle in $\Lob3\kappa$, and hence  govern whether a quadruple has an isometric embedding (briefly, \emph{embeds}) in $\Lob3\kappa$:


\begin{thm}{Lemma}
\label{lem:embedding-angles} 
In a metric space, let $Q$ be a  quadruple all of whose model angles are defined.
\begin{subthm}{embed}
If both  (1+3)-point $\kappa$-comparison (\ref{def:cbb}) and dual-(1+3)-point $\kappa$-comparison (\ref{def:alt-cba}) hold at some $p\in Q$, then $Q$ embeds in $\Lob3\kappa$. 
Conversely, if such an embedding exists, then both \ref{def:alt-cba} and \ref{def:cbb} hold at every $p\in Q$. 
\end{subthm}
\begin{subthm}{planar-embed}
If either \ref{def:alt-cba} or \ref{def:cbb} holds as an equality at some $p\in Q$, then 
$Q$ embeds in  $\Lob2\kappa$.  Conversely, if such an embedding exists, then either \ref{def:alt-cba} or \ref{def:cbb} holds as an equality at every $p\in Q$.
\end{subthm}
\end{thm}


\parit{Proof. (\ref{SHORT.embed}).} Suppose conditions  \ref{def:alt-cba} and \ref{def:cbb} hold at $p\in Q$.  Then the three model angles at $p$ are the sidelengths of a triangle $\triangle$ in $\SS^2$.  If  \ref{def:cbb} holds as an equality and one of the model angles at $p$ is $\pi$, there are infinitely many choices of $\triangle$;  in this case, let us choose $\triangle$ to be a great circle.   In any case, for each subtriple of $Q$ containing $p$, we may construct a model triangle in the $\kappa$-cone over the corresponding side of  $\triangle$, where $p$ corresponds to the cone vertex.  The result is an embedding of $Q$ in $\Cone\mc\kappa(\SS^2) = \Lob3\kappa$ (lemma \ref{lem:cos-law}).

Conversely, a quadruple $Q$ in $\Lob3\kappa$ satisfies \ref{def:alt-cba} by the triangle inequality for angles, and  satisfies \ref{def:cbb} because the maximum perimeter of a triangle in $\SS^2$ is $2\cdot\pi$.
 

\parit{(\ref{SHORT.planar-embed}).} Suppose either of the conditions \ref{def:alt-cba} or \ref{def:cbb} holds as an equality at $p\in Q$. Then the other condition also holds since  the maximum value of any angle is $\pi$.  
Then the triangle $\triangle$ of part (\ref{SHORT.embed}) is contained in a great circle $\SS^1\subset\SS^2$, and $Q$ embeds in $\Cone\mc\kappa(\SS^1)= \Lob2\kappa$. 

Conversely, if  $Q$  lies in  $\Lob2\kappa$, then at any $p\in Q$  the three model angles are the sidelengths of a triangle in $\SS^1$.  It follows that one of the two conditions  \ref{def:alt-cba} or \ref{def:cbb} holds as an equality.
\qeds


%Instead of defining $\Cat{}{\kappa}$ in terms of (2+2)-point $\kappa$-comparison, as in definition \ref{def:cat}, the following theorem shows  we could  have used dual-(1+3)-point $\kappa$-comparison instead.  
The following theorem is the dual formulation for $\Cat{}{\kappa}$ of definition \ref{df:1+3} of  $\CBB{}{\kappa}$. The defining condition in  \ref{df:1+3} is that every quadruple  satisfies (1+3)-point $\kappa$-comparison (\ref{def:cbb})  at every vertex $p$.

\begin{thm}{Theorem}\label{thm:alternate-cat-def}
A $\varpi\kappa$-geodesic metric space is $\Cat{}{\kappa}$ if and only if every quadruple  satisfies dual-(1+3)-point $\kappa$-comparison (\ref{def:alt-cba}) at some vertex $p$.
\end{thm}


\begin{thm}{Definition}\label{def:Sigma-Q}
In a metric space, let $Q$ be a  quadruple all of whose model angles are defined.
%, and no pair  $x,y\in Q$ satisfies $\dist{x}{y}{} = \varpi\kappa$.  
Writing $Q:p,x^1,x^2,x^3$, set $\~\Sigma^\kappa(p)= \angk{\kappa} p{x^1}{x^2}+\angk{\kappa} p{x^2}{x^3}+\angk{\kappa}p{x^3}{x^1}$. Set 
\[\~\Sigma^\kappa(Q) = \max_{p\in Q}\~\Sigma^\kappa(p).\]
\end{thm}


%
%In the proof of  theorem \ref{thm:alternate-def}, we say that two triangles in $\Lob2{\kappa}$ with a common vertex $x$  \emph{do not overlap} if the intersection of their convex hulls is $x$.  Our proof  will use the Overlap Lemma (\ref{lem:extend-overlap}).

\parit{Proof of Theorem \ref{thm:alternate-cat-def}.}  
A quadruple with an undefined model angle satisfies dual-(1+3)-point $\kappa$-comparison for some vertex, and  (2+2)-point $\kappa$-comparison (\ref{def:cba}) for all  vertex pairs. Thus it suffices to prove:
\begin{clm}{}\label{2+2-equiv}
In a metric space, let $Q$ be a  quadruple all of whose model angles are defined.\\
$Q$ satisfies dual-(1+3)-point $\kappa$-comparison (\ref{def:alt-cba})
 for some $p\in Q$ 
$\Longleftrightarrow$ \ \ \ \ \\
$Q$ satisfies (2+2)-point $\kappa$-comparison (\ref{def:cba}) for all  $p^1,p^2\in Q$. \end{clm}  

 \parit{ ($\Rightarrow$).}
Suppose dual-(1+3)-point $\kappa$-comparison \ref{def:alt-cba} holds at some $p\in Q$. 
%We must show that (2+2)-point comparison (\ref{def:cba}) holds for all $p^1,p^2\in Q$.  
Write $Q\:p,x^1,x^2,x^3$.  

If $\~\Sigma^{\kappa}(p)\le 2\cdot \pi$, then $Q$ embeds in $\Lob3\kappa$ by lemma \ref{lem:embedding-angles}, and the triangle inequality for angles in $\Lob3\kappa$ implies (2+2)-point comparison.

Suppose $\~\Sigma^{\kappa}(p)> 2\cdot \pi$.  
Since the sum of any two model angles at $p$ exceeds $\pi$, then (2+2)-point comparison holds for any pair $p^1,p^2\in Q$ that includes $p$. 
Now construct on each side $[\~x^j\~x^\kay]$ of the model triangle $\trig{\~x^1}{ \~x^2}{ \~x^3} = \modtrig\kappa(x^1 x^2 x^3 )$, the model triangle $\trig{\~p^i}{\~x^j}{\~x^\kay}=\modtrig{\kappa}{p}{x^j}{x^\kay}$ with $\~p^i$ and $\~x^i$  in the same closed halfspace determined by $[\~x^j\~x^\kay]$.  
By the Overlap Lemma \ref{no-overlap}, no two triangles $\trig{\~p^i}{\~x^j}{\~x^\kay}$ overlap. 
It follows that (2+2)-point comparison  (\ref{def:cba}) holds for any pair $p^1,p^2\in Q$ that does not include $p$.  
For instance, since $\angk\kappa {x^1}{x^3}p<\angk\kappa {x^1}{x^2}{x^3}$, then  \ref{def:cba} holds for $p^1=x^1$, $p^2=x^2$.

\parit{($\Leftarrow$).}
Suppose dual-(1+3)-point $\kappa$-comparison \ref{def:alt-cba}  fails for all $p\in Q$. Then  $\~\Sigma^{\kappa}(Q)\le 2\cdot \pi$. 
Moreover, for each $p\in Q$ we have a labeling $p, x^1,x^2,x^3$ of $Q$ such that 
\[\angk{\kappa} {x^1}{x^3}{x^2}
>
\angk{\kappa} {x^1}{p}{x^2}+\angk{\kappa} {x^1}{p}{x^3}.
\eqlbl{eq:dual-1+3-pf1}\]

Again construct on each side  $[\~x^j\~x^\kay]$ of the model triangle $\trig{\~x^1}{ \~x^2}{ \~x^3} = \modtrig\kappa(x^1 x^2 x^3 )$, a model triangle $\trig{\~p^i}{\~x^j}{\~x^\kay}=\modtrig{\kappa}{p}{x^j}{x^\kay}$, with $\~p^i$ and $\~x^i$  in the same closed halfspace determined by $[\~x^j\~x^\kay]$.  
 By \ref{eq:dual-1+3-pf1}, $\trig{\~p^3}{\~x^1}{\~x^2}$ and $\trig{\~p^2}{\~x^3}{\~x^1}$ do not overlap.
Since $\~\Sigma^{\kappa}(Q)\le 2\cdot \pi$, then by lemma \ref{two-overlap},
\[\angk{\kappa} {p}{x^3}{x^2}>\angk{\kappa} {p}{x^1}{x^2}+\angk{\kappa} {p}{x^1}{x^3}.\eqlbl{eq:dual-1+3-pf2}\]
By \ref{eq:dual-1+3-pf1} and \ref{eq:dual-1+3-pf2},  (2+2)-point comparison fails  for $p^1=p, \,p^2=x^1$.  
 \qeds