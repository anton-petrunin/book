%%!TEX root = all.tex
%array^
\chapter{Distance maps %ready
}\label{chap:dist-maps}

This chapter provides analogous results of Chapter~\ref{chap:web+bary} for $\Alex{}$ spaces.
The material is slightly harder mostly due to nonexistence of strongly convex functions in infinite dimensional $\Alex{}$ spaces.

In Section~\ref{sec:struts+rank},
we define $\kappa$-strutting point arrays 
and rank of a point.
In Section~\ref{sec:right-inverse-1},
we consider distance maps for a strutting point arrays.
For these maps we give a proof of a right-inverse theorem.
This technical result is used in the very base of theory, in particular in the proof of some properties of dimension.

After that we consider the finite dimensional case.
In the Section~\ref{sec:dist-chart}, we define distance chart and prove its basic properties.
In Section~\ref{sec:dist-embedding} we show that finite dimensional Alexandrov spaces are locally embeddable into Euclidean space of some big dimension.
%???




\section{Distance chart}\label{sec:dist-chart}


The next proposition follows directly from Proposition~\ref{prop:stutt}.

\begin{thm}{Proposition} 
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex{}$ space.
A point $p\in \spc{L}$ belongs to some distance chart if and only if $\rank_p=m$.
\end{thm}

The following proposition follows from the definition of differential (\ref{def:differential}), Theorem~\ref{thm:tan4finite}, Theorem~\ref{thm:differential-of-dist} and Theorem~\ref{thm:inverse-function}.%???Does it really follows???

\begin{thm}{Proposition}\label{thm:inverse-function:differential}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex{}$ space and $\bm{x}\:\spc{L}\to\RR^m$ be a distance chart.
Then for each $q\in\Dom\bm{x}$, 
the differential $\dd_q\bm{x}\:\T_q\to\RR^m$ is a bi-Lipschitz homeomorphism.
\end{thm}

\parbf{Liftings.}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex\kappa$ space
and $\bm{x}\:\spc{L}\subto\RR^m$ 
be a distance chart with strut $y\:\spc{L}\subto\RR$.
Assume that $\bm{a}=(a^0,a^1,\dots,a^m)$ is the point array  in $\spc{L}$ such that $\bm{x}=\distfun{\bm{a}^{\without 0}}{}{}|\oBall(p,R)$
and $y\z=\distfun{a^0}{}{}|\oBall(p,R)$.

Assume we have a convergence $\spc{L}_n\GHto\spc{L}$ where
$(\spc{L}_n)$ is a sequence of $m$-dimensional complete length $\Alex\kappa$ space.
Choose arbitrary liftings $a^i_n$ and $p_n$ in $\spc{L}_n$ of $a^i$ and $p$. 
If $R>0$ as in Inverse function theorem (\ref{thm:inverse-function}) then for each sufficiently large $n$ the restriction
 $\bm{x}_n\z=\distfun{\bm{a}^{\without 0}_n}{}{}|\oBall(p_n,R)$
is a distance chart 
with strut $y_n=\distfun{a^0_n}{}{}|\oBall(p_n,R)$.


The constructed charts $\bm{x}_n\:\spc{L}_n\subto\RR^m$ with struts $y_n\:\spc{L}_n\subto\RR$ 
will be called 
\emph{liftings of the distance chart}%
\index{liftings of the distance chart}  
$\bm{x}\:\spc{L}\subto\RR^m$ with strutt $y\:\spc{L}\subto\RR$.

Note that all the lifting together define a continuous submaps 
$\bm{x}\:\bm{\spc{L}}\subto\RR^m$ and $\bm{y}\:\bm{\spc{L}}\to\RR$, where the space
$$\bm{\spc{L}}=\spc{L}\sqcup\left(\bigsqcup_{i\in\NN}\spc{L}_i\right),$$
is equipped with the topology of the convergence $\spc{L}_n\GHto\spc{L}$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Perelman's lemma}\label{sec:perelman-lemma}
%Should we name it Kleiner--Perelman??? It seems we do not need it so far --- we will need it once we include material o Riemannian metric.

The following lemma is analogous to Theorem~\ref{thm:web:Up-convex}.

\begin{thm}{Perelman's lemma}\label{thm:inverse-function:concave}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex\kappa$ space,
$\bm{x}=(x^1,x^2,\dots,x^m)\:\spc{L}\subto \RR^m$ be a distance  chart with strut $y\:\spc{L}\subto \RR$.
Then the subfunction 
\[f=y\circ\bm{x}^{-1}\:\RR^m\subto \RR\] 
is a semiconcave and locally Lipschitz.
\end{thm}

\parit{Proof of \ref{thm:inverse-function:concave}.}
By the inverse fuction theorem (\ref{thm:inverse-function})
(which is practically the definition of distance chart),
it is sufficient to show, that given $z\in\Dom\bm{x}$ there is $r>0$ and $\Lambda\in\RR$,
such that for any $p$, $q\in\oBall(z,r)$ and $t\in[0,1]$, we have
\[f\circ\bm{\alpha}(t)
\ge 
t\cdot y(p)
+(1-t)\cdot y(q)
-\Lambda\cdot\tfrac{t\cdot(1-t)}{2}\cdot\ell^2,
\eqlbl{eq:f_is_concave}\]
where  $\ell=|\bm{x}(p)-\bm{x}(q)|$ and $\bm{\alpha}(t)=\geodpath_{[\bm{x}(p)\,\bm{x}(q)]}(t)$; that is,
\begin{itemize}
\item $\alpha^i(t)=(1-t)\cdot x^i(p)+t\cdot x^i(q)$ and 
\item $\bm{\alpha}(t)=(\alpha^1(t),\alpha^2(t),\dots,\alpha^m(t))\in \RR^m$.
\end{itemize}
By passing to a restriction of $\bm{x}$, if nesessury, 
we can assume that 
\begin{itemize}
\item $\Im\bm{x}$ is convex,
\item for some fixed $\lambda\ge 0$, the function $y$ 
and each $x^i$ are $\lambda$-concave in $\Dom\bm{x}$.
\item there is $\eps>0$ such that 
$\bm{x}$ is an open $[\eps,m]$-bi-Lipshitz embedding (this follows from \ref{thm:inverse-function:chart}). 
Moreover $\dd_p\bm{x}\:\T_p\to\RR^m$ is $[\eps,m]$-bi-Lipshitz %\sqrt{m} works as well???
homeomorphism for any $p\in \Dom\bm{x}$ (this follows from \ref{thm:inverse-function:differential}).
\end{itemize}
Fix $r>0$ so that $\oBall(z,2\cdot r)\subset\Dom\bm{x}$.
Since $p$, $q\in\oBall(z,r)$, 
we have $[pq]\subset\Dom\bm{x}$.
Set 
\[\bm{\beta}(t)
=
(\beta^1(t),\beta^2(t),\dots,\beta^m(t))
=
\bm{x}\circ\geodpath_{[pq]}(t).\]
Then
\[\begin{aligned}
\beta^i(t)&= 
x^i\circ\geodpath_{[pq]}(t)
\ge
\\
&\ge
t\cdot x^i(p)
+
(1-t)\cdot x^i(q)
+
\lambda\cdot\tfrac{t\cdot(1-t)}2\cdot\dist[2]{p}{q}{}
\ge
\\
&
\ge\alpha^i(t)
+
\tfrac\lambda{\eps^2}\cdot\tfrac{t\cdot(1-t)}2\cdot\ell^2
\end{aligned}
\eqlbl{eq:beta>=alpha}\]
for each $i$.
Anaogousely,
\[\begin{aligned}
f\circ\bm{\beta}(t)&=y\circ\geodpath_{[pq]}(t)
\ge
\\
&\ge
t\cdot y(p)
+(1-t)\cdot y(q)
+\tfrac\lambda{\eps^2}\cdot\tfrac{t\cdot(1-t)}2\cdot\ell^2.
\end{aligned}\eqlbl{eq:f(beta)>=}\]

Using the partial order $\succcurlyeq$ on $\RR^m$ which is defined in \ref{def:ordung}, 
all inequalities in \ref{eq:beta>=alpha} can be rewritten as 
\[\bm{\beta}(t)
-
\tfrac\lambda{\eps^2}\cdot\tfrac{t\cdot(1-t)}2\cdot\ell^2\cdot\bm{1}
\succcurlyeq 
\bm{\alpha}(t).
\eqlbl{beta>=alpha}\]
where $\bm{1}\df(1,1,\dots,1)\in\RR^m$.

Now let us prove the following claim.

\begin{clm}{}\label{partial f} The function $f$ is decreasing in each argument; 
that is,
\[\bm{v}\succcurlyeq\bm{w}\quad \Rightarrow\quad f(\bm{v})\le f(\bm{w})\]
for any $\bm{v},\bm{w}\in \Im\bm{x}$.
\end{clm}

Let $b,a^1,a^2,\dots,a^m\in\spc{L}$, be as in the definition of distant chart (\ref {def:dist-chart}).
Clearly,
\begin{itemize}
\item $\dd_p y(u)\le-\<\dir{p}{b},u\>$ and $\dd_p x^i(u)\le-\<\dir{p}{a^i},u\>$ for all $i$ and
\item $\mangle\hinge{p}{a^i}{a^j}$, $\mangle\hinge{p}{b}{a^j}>\tfrac{\pi}{2}$ for all $i,j$.
\end{itemize}
It follows from Lemma~\ref{lem:pack(S^m)+},
that
\[\text{if}\quad \dd_p x^i(u)\ge 0\quad \text{for each}\quad i\  \ \text{then}\quad \dd_p y(u)\le 0.
\eqlbl{1-st order}\]
for any $p\in\Dom\bm{x}$ and $u\in\T_p$.
Consider
\begin{itemize}
\item function $\phi\:[0,1]\to\RR$ defined as $\phi(t)=f[(1-t)\cdot\bm{v}+t\cdot\bm{w}]$ and 
\item path $\sigma\:[0,1]\to\Dom\bm{x}$ defined as $\sigma(t)=\bm{x}^{-1}[(1-t)\cdot\bm{v}+t\cdot\bm{w}]$
(it is defined since $\Im\bm{x}$ is convex).
\end{itemize}
Clearly,
$\sigma^+(t)=(\dd_{\sigma(t)}\bm{x})^{-1}(\bm{w}-\bm{v})$;
thus
 \[(\dd_{\sigma(t)}x^i)(\sigma^+(t))=w^i-v^i\ge 0.\]
From \ref{1-st order}, we have $(\dd_{\sigma(t)}y)(\sigma^+(t))\le 0$.
Therefore 
\begin{align*}
f(\bm{w})-f(\bm{v})
&=\int\limits_0^1\phi^+(t)\cdot\d t=
\\
&=\int\limits_0^1(\dd_{\phi(t)}y)(\sigma^+(t))\cdot\d t
\le 0.
\end{align*}
\claimqedsf

Note that $y$ is 1-Lipschitz.
As it is stated above, 
$\bm{x}$ is $[\eps,m]$-bi-Lipschitz.
Thus, $f=y\circ\bm{x}^{-1}$ is $\tfrac1\eps$-Lipschitz.
Applying this 
together with \ref{beta>=alpha}, 
\ref{eq:f(beta)>=}
and Claim~\ref{partial f},
we get 
\begin{align*}
f\circ\bm{\alpha}(t)
&\ge 
f
\l[
\bm{\beta}(t)
-
\tfrac\lambda{\eps^2}\cdot\tfrac{t\cdot(1-t)}2\cdot\ell^2\cdot\bm{1}
]
\ge
\\
&
\ge
f\circ\bm{\beta}(t)
+
\tfrac{\lambda
\cdot 
\sqrt{m}}{\eps^3}
\cdot
\tfrac{t\cdot(1-t)}2
\cdot
\ell^2
\ge
\\
&
\ge
t\cdot y(p)
+(1-t)\cdot y(q)+
\lambda\cdot\left(\tfrac{\sqrt{m}}{\eps^3}+\tfrac1{\eps^2}\right)
\cdot 
\tfrac{t\cdot(1-t)}2
\cdot
\ell^2.
\end{align*}
That is, \ref{eq:f_is_concave} holds for $\Lambda=\lambda\cdot\left(\tfrac{\sqrt{m}}{\eps^3}+\tfrac1{\eps^2}\right)$.
\qeds

\section{Distance embedding}\label{sec:dist-embedding}


\begin{thm}{Theorem}\label{thm:dist-emb}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex\kappa$ space, $z\in\spc{L}$ and $R>0$.
Then there is $\eps>0$, 
$\kay\in\NN$ 
and a point array $\bm{a}=(a^1,a^2,\dots,a^\kay)$ in $\spc{L}$
such that the distance map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^\kay$ is a $[\eps,\kay]$-bi-Lipschitz embedding $\oBall(z,R)\hookrightarrow\RR^\kay$.

Moreover, the values $\eps$, $\kay$ and the point array $\bm{a}$ can be chosen so that:

\begin{subthm}{thm:dist-emb:close.to.z}
All points $a^i$ lie arbitrary close to $z$;
say, given $r>0$ we can assume that $a^i\in\oBall(r,z)$ for each $i$.
\end{subthm}

\begin{subthm}{thm:dist-emb:L_n-->L}
Given a Gromov--Hausdorff convegence
$\spc{L}_n\GHto\spc{L}$ where $(\spc{L}_n)$ is a sequence of an $m$-dimensional complete length $\Alex\kappa$ spaces,
for all sufficiently large $n$
the liftings \[\distfun{\bm{a}_n}{}{}\:\spc{L}_n\to\RR\] of the distance map $\distfun{\bm{a}}{}{}$ 
give an $[\eps,\kay]$-bi-Lipschitz embedding of $\oBall(z_n,R)\subset \spc{L}_n$ for lifting $z_n\in\spc{L}_n$ of $z$.
\end{subthm}
\end{thm}

As a corollary, we obtain the following usefull technical statememnt.
The original proof of this lemma was build on volume comparison %???
 for a map $p\mapsto \ddir{x}{p}$ with arbitrary choice of geodesic $p\mapsto [xp]$;
compare \cite[Lemma~1.3]{grove-petersen:finiteness}.

\begin{thm}{Obtuse-angle lemma} \label{lem:tuda-suda} Given $v>0$, $r>0$,
$\kappa\in\RR$ and $m\in\NN$, there is $\eps=\eps(v,r,\kappa,m)>0$ such that if
$\spc{L}$ is an $m$-dimensional complete length $\Alex\kappa$ space, $p\in \spc{L}$, $\vol_m \oBall(p,r)>v$, then for any two points
$x,y\in \oBall(p,r)$, $\dist{x}{y}{}<\eps$ there is point $z\in \oBall(p,r)$ such that 
\[\mangle\hinge x z y>\tfrac\pi2+\eps\quad \text{or}\quad  \mangle\hinge y z x>\tfrac\pi2+\eps.\]
\end{thm}

\parit{Proof of \ref{thm:dist-emb}.}
Without loss of generality, we may assume that $\kappa\z=-1$;
that is, $\spc{L}$ is a $\Alex{-1}$ space.

\begin{wrapfigure}[8]{r}{30mm}
\begin{lpic}[t(-5mm),b(0mm),r(0mm),l(0mm)]{pics/gradient-bisector-triangle(0.4)}
\lbl[br]{21,31;$x$}
\lbl[tl]{43,22;$y$}
\lbl[rb]{44,63,67;{\small $\GradBis(\ $}}
\lbl[b]{44,63,53;{\small $R$}}
\lbl[lb]{44,63,27;{\small $\ ;x,y)$}}
\lbl[]{55,45;$\spc{L}$}
\end{lpic}
\end{wrapfigure}

Assume 
$x,y\in \spc{L}$ be a pair of distinct points.
Let us construct a subset $\RB{}(R;x,y)\subset\spc{L}$, 
which will be called  \emph{radial bisector of radius $R$ between $x$ and $y$}.
To do this, first consider the function $f\z=\min\{\distfun{x}{}{},\distfun{y}{}{}\}$.
We say that $p\in\RB(R;x,y)$ if for some $0<s_0\le s_1\le R$ 
there is a point $q\in \spc{L}$ such that $s_0=\dist{x}{q}{}=\dist{y}{q}{}$ 
and $p=\sigma(s_1)$ where $\sigma$ is an $f$-radial curve such that $\sigma(s_0)=q$.



\parbf{Remark.}
Clearly $\RB(R;x,y)$ contains all point $p$ such that $\dist{p}{x}{}\z=\dist{p}{y}{}\le R$,
but in general this set is bigger.
For example, assume that space $\spc{L}$ is isometric to a solid plane triangle, then,
the set $\RB(R;x,y)$ for some $x,y\in\spc{L}$ might contain segments on the boundary of $\spc{L}$ (as on the figure).


\begin{clm}{}\label{clm:GB}
Given a pair of distinct points $x,y\in \spc{L}$, 
there is a $(\sinh R)$-Lipschitz map $\map\:\mathbb{S}^{m-1}\to\spc{L}$ such that 
$\Im\map_R\supset\RB(R;x,y)$.
\end{clm}

\parit{Proof of the claim.}
Set $f=\min\{\distfun{x}{}{},\distfun{y}{}{}\}$ as above.

Let us denote by $\sigma_w$ the $f$-radial curve for curvature $-1$ initiated at $w\in\spc{L}\backslash\{x,y\}$.
Given $\xi\in\Sigma_x$ consider sequence of points $w_n\to x$ such that $\dir{x}{w_n}\to\xi$.
Applying \ref{gen-rad-comp} for $A=\{x,y\}$, we get that $\sigma_{w_n}$ convege pointwise to a radial curve $\sigma_\xi$ such that $\sigma_\xi(0)=x$ and $\sigma^+_\xi(0)=\xi$.
Moreover, it follows that if $\xi^1,\xi^2\in\Sigma_x$ and $\mangle(\xi^1,\xi^2)=\phi$, then $\dist{\sigma_{\xi^1}(t_1)}{\sigma_{\xi^2}(t_2)}{}\le \side{-1} \{\phi,t_1,t_2\}$.
In particular, the map $\map_R\:\xi\mapsto\sigma_\xi(R)$ is a $(\sinh R)$-Lipschitz map from $\Sigma_x$ to $\spc{L}$.

Let us show that $\Im\map_R\supset \RB(R;x,y)$.

First note that
if $\dist{x}{q}{}=\dist{y}{q}{}=s_0$, then $q\in\Im\map_{s}$ for any $s\ge s_0$.
Indeed,  $\Im\map_s$ separates %???WHY
 $x$ and $y$ in $\spc{L}$.
Thus, for any choice of geodesics $[q x]$ and $[q y]$, 
the set $\Im\map_s$ contains at least one point on $[x q]\cup[q y]$.
However, it can not contain any point except $q$.
Indeed, assume $\map_s(\xi)= w\in]xq[$
then according to \ref{prop:grad-like-unique-past}, $\sigma_\xi\left([0,s]\right)=[xw]$; 
consequently $s<s_0$, a contradiction.


Now assume $p\in \RB(R;x,y)$.
Let $s_0\le s_1\le R$ and $q\in\spc{L}$ be as in the construction of radial bisector.
From above, we have that for any $s\ge s_0$ there is $\xi(s)\in\Sigma_x$ such that $q=\sigma_{\xi(s)}(s)$.
Note that the $\sigma_{\xi(s)}\left([s,\infty)\right)=\sigma_q\left([s_0,\infty)\right)$ 
for any $s\ge s_0$.
Further note, that the map $\tau\:s\mapsto \sigma_{\xi(s)}(R)$ is continuous%
\footnote{Note however that the map $s\mapsto\xi(s)$ might be non-continuous.}
for $s\in[s_0,R]$.
Clearly, $\tau(R)=q$ and $\tau(s_0)=\sigma(R)$.
Thus, the curve $\tau|[s_0,R]$ runs along $\sigma|_{[s_0,R]}$ in opposite direction.
In particular, for some $s\in[s_0,R]$, we have
$p=\sigma_{\xi(s)}(R)$ or $p\in\Im\map_R$.

This finishes the proof of the claim in case $x$ is regular; that is, $\Sigma_x\iso\mathbb{S}^{m-1}$.

To prove the general case,
choose a sequence of regular points $x_n\to x$ (the existence of this sequence follows from \ref{LinDim+-f}).
Applying the above argument, we get the existence of a sequence of $(\sinh R)$-Lipschitz maps $\map_{R;n}\:\mathbb{S}^{m-1}\to\spc{L}$ such that 
$\Im\map_{R;n}
\supset
\RB(R;x_n,y)$.
The sets $\RB(R;x_n,y)$ converges 
in the Hausdorff sense to $\RB(R;x,y)$. %???WHY???
Thus one can take $\map_R$ to be a partial limit of $\map_{R;n}$ as $n\to\infty$.
\claimqeds


Note that for any choice of $\kay$-array $\bm{a}$ in $\spc{L}$,
the distance map $\distfun{\bm{a}}{}{}\:\spc{L}\to\RR^\kay$ is $\kay$-Lipschitz.
Thus it remains to show that one can choose $\kay$, $\bm{a}$ and $\eps>0$ on such a way that 
\[|\dist{a^i}{x}{}-\dist{a^i}{y}{}|>\eps\cdot\dist[{{}}]{x}{y}{}
\quad \text{for at least one}\quad i
\eqlbl{eq:bilip}\]
and any $x,y\in\oBall(z,R)$.

\begin{wrapfigure}{l}{22mm}
\begin{lpic}[t(0mm),b(0mm),r(0mm),l(0mm)]{pics/pp-1(0.45)}
\lbl[rt]{10,3;$x$}
\lbl[lt]{33,3;$y$}
\lbl[l]{42,51;$p$}
\lbl[r]{25,60;$\check p$}
\lbl[b]{20,46,90;{\small $\sigma(s)$}}
\lbl[t]{21,31;$q$}
\lbl[l]{4,30;$\spc{L}$}
\end{lpic}
\end{wrapfigure}

Assume we want to choose all $a^i$ in $\oBall(z,r)$ for some $0<r\le R$;
that is only needed to prove (\ref{SHORT.thm:dist-emb:close.to.z}).

For sufficiently small $\delta>0$,
choose $\bm{a}$ so that the set $\{a^1,a_2,\dots,a^\kay\}$ 
forms a \emph{maximal $\delta$-packing}\index{maximal $\eps$-packing} in $\oBall(z,r)$;
that is, $\kay=\pack_\delta\oBall(z,r)$ and $\dist{a^i}{a^j}{}>\delta$ for all $i\not=j$.
Note that according to \ref{pack}, we have $\kay>\Const/\delta^m$ for some $\Const>0$.
Thus, we can assume that
\[\kay>\pack_{\delta_1}\mathbb{S}^{m-1},
\quad \text{where}\quad 
\delta_1=\frac{\delta}{2\cdot\sinh (2\cdot R)}.
\eqlbl{delta-def}\]


For fixed $x,y\in\spc{L}$ and arbitrary point $p\in\spc{L}$, 
let us describe a construction of a new point $\check p$ on gradient bisector of $x$ and $y$.
Assume $\dist{x}{p}{}\ge\dist{y}{p}{}$; 
if not --- switch $x$ and $y$ in all the following construction.
Choose a point $q\in [x p]$ such that $\dist{x}{q}{}=\dist{y}{q}{}$.
Set $s_0=\dist{x}{q}{}=\dist{y}{q}{}$ and $s_1=\dist{x}{p}{}$.
As above, set $f=\min\{\distfun{x}{}{},\distfun{y}{}{}\}$.
Let $\sigma\:[s_0,\infty)\to\spc{L}$ be an $f$-radial 
curve that starts at $q$.
Then set $\check p=\sigma(s_1)$.
Clearly, $s_1\le 2\cdot R$; hence $\check p\in \RB(2\cdot R;x,y)$.

\begin{wrapfigure}{r}{22mm}
\begin{lpic}[t(0mm),b(0mm),r(0mm),l(0mm)]{pics/pp-1-model(0.45)}
\lbl[rt]{10,5;$\tilde x$}
\lbl[lt]{33,5;$\tilde y$}
\lbl[rb]{42,52;$\tilde p$}
\lbl[lb]{3,52;$\tilde {\check p}$}
\lbl[l]{24,19;$\tilde q$}
\lbl[l]{40,17;$\Lob2{-1}$}
\end{lpic}
\end{wrapfigure}

%???\tilde {\check p} is not a good thing!!!

Now let us construct corresponding model configuration.
Consider a model triangle $\trig{\tilde x}{\tilde y}{\tilde p}=\modtrig{-1}(x y p)$ in $\Lob2{-1}$.
Let $\tilde {\check p}$ be the reflection of $\tilde p$ in the bisecting perpendicular to $[\tilde x\tilde y]$
and $\tilde q$ lie on the intersection of $[\tilde x\tilde p]$ and $[\tilde y\tilde {\check p}]$.
From ??? comparison, 
$\dist{\tilde y}{\tilde q}{}\le s_0$
and clearly $\dist{\tilde y}{\tilde q}{}+\dist{\tilde q}{\tilde p}{}=s_1=\dist{y}{q}{}+\dist{q}{p}{}$.
It follows that $\mangle\hinge{\tilde y}{\tilde p}{\tilde q}\le\angk{-1}{y}{p}{q}$.
Thus, from radial comparison (\ref{gen-rad-comp}) 
we have 
\[\dist{p}{\check p}{}\le\dist{\tilde p}{\tilde {\check p}}{}.
\eqlbl{eq:|p p'|}\]

Assume 
$x,y\in\Omega$, 
$p\in\oBall(z,r)$,
and $|\dist{p}{x}{}-\dist{p}{y}{}|\le\eps\cdot\dist[{{}}]{x}{y}{}$
for sufficiently small $\eps>0$.
Clearly $\dist{x}{y}{}$, $\dist{x}{p}{}$, $\dist{y}{p}{}\le 2\cdot R$;
thus $\check p\in\RB(2\cdot R;x,y)$.
Direct calculations show that 
$\dist{\tilde p}{\tilde {\check p}}{}<\sqrt{\eps}$.
Inequality \ref{eq:|p p'|} implies that we can fix $\eps=\eps(\delta,\RR)>0$ so small that 
\[\dist{p}{\check p}{}<\sqrt{\eps}<\tfrac\delta 4.
\eqlbl{eps-def}\]

Now assume \ref{eq:bilip} does not hold; that is,
\[|\dist{a^i}{x}{}-\dist{a^i}{y}{}|\le\eps\cdot\dist[{{}}]{x}{y}{}
\quad \text{for each}\quad i.
\]
Then for each $i$ we have $\dist{a^i}{\check a^i}{}<\sqrt{\eps}$.
Therefore 
\begin{align*}
\dist{\check a^i}{\check a^j}{}&>\delta-2\cdot\sqrt{\eps}>
\\
&>\tfrac\delta2.
\end{align*}

Applying Claim~\ref{clm:GB}, we get a contradiction with \ref{delta-def}.

To prove (\ref{SHORT.thm:dist-emb:L_n-->L}),
note that all the constructions above  survive under noncollapsing Gromov--Hausdorff convergence. %???
\qeds

\begin{thm}{Exercise}\label{ex:lip+dist}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex{}$ space.
Then any Lipschitz 
%(???DC, DMD???) 
function $f$ with compact support in  $\spc{L}$ can be presented as a composition
\[f=\phi\circ\distfun{\bm{a}}{}{},\]
where $\bm{a}=(a^1,a^2,\dots,a^\kay)$ is an array of points in $\spc{L}$ and $\phi$ be a Lipschitz function with compact support in $\RR^\kay$.
\end{thm}

