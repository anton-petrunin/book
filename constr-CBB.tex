%%!TEX root = the-constr-CBB.tex
\chapter{Constructions}

%%%???MOVE THINGS TO DIFFERENT PLACES???

\begin{thm}{Corollary}
Assume $\spc{K}$ be a cone.
Given $w\in  \spc{K}$ consider 
the function $f_w\:\spc{K}\to\RR$
\[f_w(x)=\<w,x\>.\]
Then

\begin{subthm}{}
If $\spc{K}$ is a complete length $\Alex0$ space, then $f_w$ is convex.
\end{subthm}

\begin{subthm}{}
If $\spc{K}$ is $\CAT0$, then $f_w$ is concave.
\end{subthm}
\end{thm}

\parit{Proof.}
In both cases, the statement are trivial if $w=0$.

If $w\ne 0$, consider the ray $\gamma(t)=\tfrac1{|w|}\cdot t$









\section{Boundary strata}
Let $\spc{L}$ be a complete length $\Alex{}$ space.
A closed subset $A\subset \spc{L}$ 
is called a 
\index{boundary stratum}\emph{boundary stratum} if the function $\distfun{A}{}{}$
is semiconcave.

The choice of the term ``boundary stratum'',
will be clear once we define boundary of finite dimensional $\Alex{}$ spaces.

\begin{thm}{Proposition}\label{prop:A-extremal}
Let $\spc{L}$ be a complete length $\Alex{}$ space and $A\subset \spc{L}$ 
be a boundary stratum.
Assume $\alpha(t)$ is a radial curve in $\spc{L}$ 
and $\alpha(t_0)\in A$.
Then $\alpha(t)\in A$ for any $t\ge t_0$. 
\end{thm}

\section{Doubling theorem}

\begin{thm}{Doubling theorem}\label{thm:doubling}
Let $\spc{L}$ is a complete length $\Alex\kappa$ space
and $A$ be a boundary stratum in $\spc{L}$.
Then the doubling of $\spc{L}$ in $A$ 
is a complete length $\Alex\kappa$ space.
\end{thm}

In the proof we will use the following statements.
Recall that $\spc{W}_\o$ denotes the $\o$-limit of the sequence of spaces $(\spc{W}_n)$;
see Section~\ref{sec:Ultralimit of spaces}.


\begin{thm}{Lemma}\label{lem:ultra-doubling}
Let $\spc{V}_n$ be a sequence of metric spaces 
and $A_n\subset \spc{V}_n$ be a closed subset for each $n$.
Denote by $\spc{W}_n$ the doubling of $\spc{V}_n$ in $A_n$;

Then 
\begin{subthm}{}
$\spc{W}_\o$ is isometric to the doubling of $\spc{V}_\o$ in $A_\o$.
\end{subthm}



\begin{subthm}{}
If $\spc{V}_n$ are a complete length $\Alex\kappa$ spaces and $A_n$ is a boundary stratum of $\spc{V}_n$
then 
$A_\o$ is a boundary stratum of $\spc{V}_\o$.
\end{subthm}

\end{thm}


\begin{thm}{Splitting Lemma}\label{lem:split}
Let $\spc{L}$ be a complete length $\Alex0$ space and $A\subset \spc{L}$ is a closed set.
Assume that $\distfun{A}{}{}$ is concave and there is a function $f\:\spc{L}\to \RR$ which is a convex combination of Busemann functions which admits its minimum on $A$ say at $a$.
Then 
there is $\lambda\ge 0$ such that 
\[f(x)= f(a)-\lambda\cdot\dist{A}{x}{}\]
for any $x\in \spc{L}$.
Moreover, if $\lambda\ne0$, then $A$ is a convex in $\spc{L}$
and there is a ray $\gamma$ starting at $A$ such that 
\[\spc{L}=A\oplus\gamma.\]
\end{thm}

The proof of this lemma is based on the same idea as the proof of Toponogov's splitting theorem (\ref{thm:splitting}).


\begin{thm}{Doubling Lemma}\label{lem:doubling}
Let $\spc{L}$ be a complete length $\Alex{}$ space and $\spc{W}$ is the doubling of $\spc{L}$ in its boundary stratum $A$.
Assume that a geodesic $[xy]$ in $\spc{W}$ 
cross $A$ at $a\in \left]xy\right[$.
Then $\T^\o_a\spc{W}$ splits with factor $\T^\o_a A$ and an other factor isometric to $\RR$.

In particular, $\T^\o_a\spc{W}$ is a complete length $\Alex0$ space.
\end{thm}

\parit{Proof.}
Consider two functions $f,g\:\spc{L}\to\RR$ 
defined as 
\begin{align*}
f(z)&\df\dist{x'}{z}{}+\dist{y}{z}{},
\\
g(z)&\df\dist{A}{z}{}.
\end{align*}

According to ???, $\T^\o_a\spc{L}$ is a complete geodesic $\Alex0$ space.
Note that 
\[\d^\o_a g(w)=\dist{\T^\o_a A}{w}{\T^\o_a\spc{L}}.\]
and $\d^\o_a f$ is a sum of Buseman's functions.
By Splitting Lemma (\ref{lem:split}), 
$\T^\o_a\spc{L}$ is isometic to $\T^\o_a A\oplus\RR_\ge$.
(More precisely there is a ray $\gamma$ staring at $0\in \T^\o_a$
such that $\T^\o_a\spc{L}=\T^\o_a A\oplus\gamma$.)

In particular the doubling of $\T^\o_a\spc{L}$
in $\T^\o_a A$ is isometric to $\T^\o_a A\times\RR$.
Since $\T^\o_a\spc{L}$ is a complete geodesic $\Alex0$ space
and $\T^\o_a A$ is convex in $\T^\o_a\spc{L}$,
the doubling is a $\Alex0$ space.
It remains to apply Exercise~\ref{ex:splitting}.

\qeds

\parit{Proof.}
Consider two functions $f,g\:\spc{L}\to\RR$ 
defined as 
\begin{align*}
f(z)&=\distfun{x'}{}{}+\distfun{y}{}{},
\\
g(z)&=\dist{A}{z}{}.
\end{align*}

Note that $\o$-differentials
$\d^\o_a f,\d^\o_ag\:\T^\o_a\spc{L}\to\RR$ are concave.
The minimum of $\d^\o f$ on $\T^\o_aA$ 
is acheved at $0$. 
Further note that 
\[d^\o_a g(w)=\dist{\T^\o_a A}{w}{\T^\o_a\spc{L}}.\]

Applying Splitteing lemma, we get that $\T^\o_a\spc{L}$ is 


Let us show that for some $\lambda>0$ we have
\[d^\o_a g+\lambda\cdot\d^\o_a f=0.\]
In particular it will imply that both $\o$-differentials 
$\d^\o_a f,\d^\o_ag$ are affine in $\T^\o_a\spc{L}$.

Note that the vector $v=\nabla_ag$ 
lies in the tangent space $\T_a$ 
which we consider as a subset of $\T^\o_a$.
Note that $\d^\o_a g(v)<0$,
choose $\lambda>0$ so that
\[\d_af(v)+\lambda\cdot\d_ag(v)=0.\]


Consider the functions $h=\distfun{A}{}{}$ and


Set $v=\nabla_ah$
and $s=\d_af(v)$.

Note that $\d_af(w)\ge 0$ for any $w\in\T_aA$
Since boy that $f$ is semiconvex in the neighborhood of $a$.
Therefore the gradient $\nabla_af$ is well defined.


\qeds

\parit{Proof of Doubling theorem (\ref{thm:doubling}).}
Denote by $\spc{W}$ the doubling of $\spc{L}$ in $A$.
Let us assume that $\spc{W}$ is geodesic.

Let us show the adjacent angle comparison \ref{2-sum} 
holds in $\spc{W}$.
That is, we need to show that for any geodesic $[x y]$ and $z\in \l]x y\r[$, $z\not=p$ we have
\[\angk\kappa z p x +\angk\kappa z p y\le \pi.\eqlbl{eq:AAC-doubling}\]
The proof divided into cases depending on the side of points $x,y,z,p$ from $A$. 

\parit{Case 1.}
Assume $p,x,y\in \spc{L}$ or $p,x,y\in \spc{L}'$.
Without loss of generality we may assume the former.

Recall that $\bar z=z$ if $z\in\spc{L}$ and $\bar z=z'$ otherwise.
According to Proposition~\ref{prop:doubling}, the map $z\mapsto \bar z$ is short and length preserving.
In particular $\bar z$ lies on a geodesic from $x$ to $y$ in $\spc{L}$
and by adjacent angle comparison in $\spc{L}$,
we get 
\[\angk\kappa {\bar z} p x
+\angk\kappa {\bar z} p y\le \pi.\]

Since $z\mapsto \bar z$ is a short map, we get
$\dist{p}{z}{\spc{W}}\ge \dist{p}{\bar z}{\spc{L}}.$
Applying Alexandrov's lemma \ref{lem:alex} we get \ref{eq:AAC-doubling}.


\parit{Case 2.} 
The points $x,p\in\spc{L}$ and $y\notin\spc{L}$ and $z\in A$. (The points $x$ and $y$ can be switched since they are equisignificant in \ref{eq:AAC-doubling}.)

By 
Doubling Lemma~\ref{lem:doubling} and
Toponogov's splitting theorem\ref{thm:splitting}
we get that there is $b_\o\in \T^\o_a A$ such that 
\[\angk\kappa zp{b_\o}+\angk\kappa  z{b_\o}y\le \pi-\angk\kappa zxp.\]

Recall that $\T_a^\o A$ is a $\o$ limit of $n\cdot A$.
Choose a sequence $b_n\in A$ be the sequence of points which $\o$-converges to $b_\o\in \T_a^\o A$.

Let $[\~x\~z\~p]=\modtrig\kappa xzp$.
Extend the side $[\~x\~z]$ 
behind $\~z$, let $\~y$ 
be the point on the extension such that $\dist{\~x}{\~y}{\Lob2\kappa}=\dist{x}{y}{\spc{W}}$.
If $\alpha<\mangle\hinge {\~z}{\~y}{\~p}$,
choose a point $\~w\in [\~y\~p]$ such that $\alpha=\mangle\hinge {\~z}{\~y}{\~w}$,
otherwise set $\~w=\~p$.

Let $\beta_n$ be the $\kappa$-radial curve with respect to $z$ starting at $b_n$.
Set $c_n=\beta_n(\dist{\~z}{\~w}{})$.
By Radial monotonicity~\ref{rad-mon}, we get
\begin{align*}
\dist{p}{y}{\spc{W}}
&\le\lim_{n\to\o}\dist{y}{c_n}{\spc{L}}+\dist{p}{c_n}{\spc{L}}\le
\\
&\le \dist{\~y}{\~p}{\Lob2\kappa}
\end{align*}
Hence \ref{eq:doubling-comp} follows.
Whence \ref{eq:AAC-doubling} follows.

\parit{Case 3.}
Assume $[xy]\in\spc{L}$ and $p\notin\spc{L}$.

Let $q$ be the point of intersection of $[pz]$ with $A$ which is closest to $z$.
Applying adjacent angle comparison in $\spc{L}$,
we get 
\[\angk\kappa {\bar z} q x
+\angk\kappa {\bar z} q y\le \pi.\]
Applying Case 2, and Alexandrov's lemma,
we get
\begin{align*}
\angk\kappa {\bar z} p x&\le \angk\kappa {\bar z} q x
\\
\angk\kappa {\bar z} p y&\le \angk\kappa {\bar z} q y
\end{align*}
Hence the statement follows.

\parit{Remaining cases.} By Alexandrov's lemma,
all the remaining cases easily follow from the three cases above.

\parit{Reduction to geodesic case.}
Let us pass to the $\o$-powers $A^\o\subset \spc{L}^\o\subset\spc{W}^\o$.
By Corollary \ref{cor:ulara-geod}, $\spc{W}^\o$ is geodesic.
By Lemma~\ref{lem:ultra-doubling},
 $\spc{W}^\o$ is doubling of $\spc{L}^\o$ in $A^\o$ and $A^\o$ is a boundary stratum in $\spc{L}^\o$.
That is, assuming that the theorem holds if the doubling space is geodesic, we have that $\spc{W}^\o$ is $\Alex\kappa$ and by Proposition~\ref{prp:A^omega}, we get that $\spc{W}$ is $\Alex\kappa$.
\qeds









\section{Exercises}



\begin{thm}{Exercise}
Let $\spc{X}$ be an $m$-dimensional complete length $\Alex\kappa$ space and $A\subset \spc{X}$ be a closed subset.
Assume that  $\Doubling{A}{\spc{X}}$ is an $m$-dimensional complete length $\Alex\kappa$ space. 
Show that $A$ is formed by union of primitive extremal subsets of dimension $m-1$.
\end{thm}

\begin{thm}{Exercise}
Let $\spc{U}$ be a $\CAT0$ space homeomorphic to $\RR^3$ and 
$\proj\:\~U\to U$ be a covering map which is branching along a simple curve $\gamma$.
Define the length-metric on $\~U$ by setting 
\[\length\alpha=\length(\proj\circ\alpha).\]
Prove that $\~U$ is $\CAT0$ if and only if $\gamma$ is a line.
\end{thm}


\begin{thm}{Exercise}

\begin{subthm}{}
Prove the converse to Doubling theorem~\ref{thm:doubling}.
That is, 
show that the doubling of $\spc{V}$ 
in a closed set $A\subset \spc{V}$ 
is a $\Alex\kappa$ space 
then $\spc{V}$ is a complete $\Alex\kappa$ space and $A$ is a boundary stratum in $\spc{V}$.
\end{subthm}


\begin{subthm}{}
Show that any geodesic $\CAT{0}$ space is isometric to a convex subset in a geometrically complete $\CAT{0}$ space.
\end{subthm}

\begin{subthm}{}
Construct a compact length $\CAT0$ space 
which is not isometric to any convex subset in a geodesically complete locally compact $\CAT0$ space.
\end{subthm}

\end{thm}

\begin{thm}{Exercise}
Construct a two-dimensional complete length $\Alex{-1}$ space $\spc{L}$, 
such that an open everywhere dense set of $\spc{L}$ is locally $\Alex\kappa$, but $\spc{L}$ is not $\Alex1$.
\end{thm}


\begin{thm}{Exercise}\label{ex:no-convex-nbhd-CBB}
Construct a complete length $\Alex0$ space $\spc{L}$
with a point $p\in \spc{L}$ which does not admit arbitrary small closed convex neighborhood. 
\end{thm}


\begin{thm}{Exercise}\label{ex:nan-li}
Let $\spc{L}$ be an $m$-dimensional complete length $\Alex\kappa$ space, $\partial \spc{L}\ne \emptyset$
and $\iota\: \partial \spc{L}\to \partial \spc{L}$ is length preserving involution.
Show that $\spc{L}/\iota$ is an $m$-dimensional complete length $\Alex\kappa$ space.
\end{thm}











